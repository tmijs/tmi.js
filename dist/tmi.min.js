!function e(t,r,n){function i(s,a){if(!r[s]){if(!t[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=r[s]={exports:{}};t[s][0].call(l.exports,function(e){var r=t[s][1][e];return i(r?r:e)},l,l.exports,e,t,r,n)}return r[s].exports}for(var o="function"==typeof require&&require,s=0;s<n.length;s++)i(n[s]);return i}({1:[function(e,t,r){"use strict";t.exports={client:e("./lib/client")}},{"./lib/client":3}],2:[function(e,t,r){(function(r){"use strict";var n="undefined"!=typeof window?window.request:"undefined"!=typeof r?r.request:null,i=e("./utils"),o=function(e,t){var r="undefined"==typeof e.url?"":e.url;if(""===r&&(r="undefined"==typeof e.uri?"":e.uri),i.isURL(r)||(r="/"!==r.charAt(0)?"https://api.twitch.tv/kraken/"+r:"https://api.twitch.tv/kraken"+r),e.url=r,i.isNodeJS()){var o={url:r,method:"GET"};n(i.mergeRecursive(o,e),function(e,r,n){t(e,r,n)})}else{var s="jsonp_callback_"+Math.round(1e5*Math.random());window[s]=function(e){delete window[s],document.body.removeChild(a),t(null,null,e)};var a=document.createElement("script");a.src=r+(r.indexOf("?")>=0?"&":"?")+"callback="+s,document.body.appendChild(a)}};t.exports=o}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./utils":8}],3:[function(e,t,r){(function(r){"use strict";var n=e("./api"),i=e("./commands"),o="undefined"!=typeof window?window.cron:"undefined"!=typeof r?r.cron:null,s=e("events").EventEmitter,a="undefined"!=typeof window?window.locallydb:"undefined"!=typeof r?r.locallydb:null,u=e("./logger"),c=e("irc-message").parse,l=e("./server"),h=e("./timer"),f=e("util"),p=e("./utils"),d=e("ws"),m=e("underscore");Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){var r;if(null==this)throw new TypeError('"this" is null or not defined');var n=Object(this),i=n.length>>>0;if(0===i)return-1;var o=+t||0;if(Math.abs(o)===1/0&&(o=0),o>=i)return-1;for(r=Math.max(o>=0?o:i-Math.abs(o),0);i>r;){if(r in n&&n[r]===e)return r;r++}return-1}),String.prototype.includes||(String.prototype.includes=function(){return-1!==String.prototype.indexOf.apply(this,arguments)}),String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return t=t||0,this.indexOf(e,t)===t});var g=function y(e){if(this instanceof y==!1)return new y(e);this.setMaxListeners(0),this.opts="undefined"==typeof e?{}:e,this.opts.channels=this.opts.channels||[],this.opts.connection=this.opts.connection||{},this.opts.identity=this.opts.identity||{},this.opts.options=this.opts.options||{},this.channels=[],this.globaluserstate={},this.lastJoined="",this.latency=new Date,this.moderators={},this.pingLoop=null,this.pingTimeout=null,this.reconnectTimer=0,this.username="",this.userstate={},this.wasCloseCalled=!1,this.ws=null,this.reconnecting=!1,this.banError="",this.eventMods=[];var t="error";this.opts.options.debug&&(t="info"),this.log=this.opts.logger||u.createLogger("tmi.js",t,"raw"),this.opts.channels.forEach(function(e,t,r){r[t]=p.normalizeChannel(e)}),s.call(this)};f.inherits(g,s),g.prototype.api=n;for(var v in i)g.prototype[v]=i[v];g.prototype.def=function(e,t){var r;return Object.defineProperty(this,e,{get:function(){return r},set:function(e){t&&t(r,e),r=e}}),this[e]},g.prototype.handleMessage=function(e){var t=this;if(null!==e){if(m.isString(e.tags.emotes)){for(var r=e.tags.emotes.split("/"),n={},i=0;i<r.length;i++){var o=r[i].split(":");n[o[0]]=o[1].split(",")}e.tags["emotes-raw"]=e.tags.emotes,e.tags.emotes=n}if(m.isBoolean(e.tags.emotes)&&(e.tags["emotes-raw"]=null),e.tags)for(var s in e.tags)"emote-sets"!==s&&(m.isBoolean(e.tags[s])?e.tags[s]=null:"1"===e.tags[s]?e.tags[s]=!0:"0"===e.tags[s]&&(e.tags[s]=!1));if(m.isNull(e.prefix))switch(e.command){case"PING":this.emit("ping"),this.ws.send("PONG");break;case"PONG":var a=new Date,u=(a.getTime()-this.latency.getTime())/1e3;this.emit("pong",u),clearTimeout(this.pingTimeout);break;default:this.log.warn("Could not parse message with no prefix:\n"+e.raw)}else if("tmi.twitch.tv"===e.prefix)switch(e.command){case"002":case"003":case"004":case"375":case"376":case"CAP":break;case"001":this.username=e.params[0];break;case"372":this.log.info("Connected to server."),this.userstate["#jtv"]={},this.emit("connected",this.server,this.port),this.reconnectTimer=0,this.pingLoop=setInterval(function(){m.isNull(t.ws)||2===t.ws.readyState||3===t.ws.readyState||t.ws.send("PING"),t.latency=new Date,t.pingTimeout=setTimeout(function(){m.isNull(t.ws)||(t.wasCloseCalled=!1,t.log.error("Ping timeout."),t.ws.close(),clearInterval(t.pingLoop),clearTimeout(t.pingTimeout))},"undefined"==typeof t.opts.connection.timeout?9999:t.opts.connection.timeout)},6e4);var c=new h.queue(2e3),l=m.union(this.opts.channels,this.channels);this.channels=[],l.length>=75&&(this.log.warn("You are joining a large amount of channels, you might get disconnected from server if you receive too much data."),this.log.warn("Consider creating multiple connections or use Node.js clusters."));for(var i=0;i<l.length;i++){var f=this;c.add(function(e){m.isNull(f.ws)||2===f.ws.readyState||3===f.ws.readyState||f.ws.send("JOIN "+p.normalizeChannel(l[e]))}.bind(this,i))}c.run();break;case"NOTICE":var d=e.tags["msg-id"]||null;switch(d){case"subs_on":this.log.info("["+e.params[0]+"] This room is now in subscribers-only mode."),this.emit("subscriber",e.params[0],!0),this.emit("subscribers",e.params[0],!0);break;case"subs_off":this.log.info("["+e.params[0]+"] This room is no longer in subscribers-only mode."),this.emit("subscriber",e.params[0],!1),this.emit("subscribers",e.params[0],!1);break;case"slow_on":case"slow_off":break;case"r9k_on":this.log.info("["+e.params[0]+"] This room is now in r9k mode."),this.emit("r9kmode",e.params[0],!0),this.emit("r9kbeta",e.params[0],!0);break;case"r9k_off":this.log.info("["+e.params[0]+"] This room is no longer in r9k mode."),this.emit("r9kmode",e.params[0],!1),this.emit("r9kbeta",e.params[0],!1);break;case"room_mods":for(var g=e.params[1].split(":"),v=g[1].replace(/,/g,"").split(":").toString().toLowerCase().split(" "),i=v.length-1;i>=0;i--)""===v[i]&&v.splice(i,1);this.eventMods=v,this.emit("mods",e.params[0],v);break;case"no_mods":this.eventMods=[];break;case"already_banned":case"bad_ban_admin":case"bad_ban_broadcaster":case"bad_ban_global_mod":case"bad_ban_self":case"bad_ban_staff":case"bad_mod_banned":case"usage_ban":this.banError=e.tags["msg-id"],this.log.info("["+e.params[0]+"] "+e.params[1]),this.emit("notice",e.params[0],e.tags["msg-id"],e.params[1]);break;case"ban_success":this.banError="",this.log.info("["+e.params[0]+"] "+e.params[1]),this.emit("notice",e.params[0],e.tags["msg-id"],e.params[1]);break;case"already_subs_off":case"bad_commercial_error":case"bad_timeout_admin":case"bad_timeout_broadcaster":case"bad_timeout_global_mod":case"bad_timeout_self":case"bad_timeout_staff":case"bad_unban_no_ban":case"cmds_available":case"color_changed":case"commercial_success":case"hosts_remaining":case"host_target_went_offline":case"msg_banned":case"msg_duplicate":case"msg_verified_email":case"msg_ratelimit":case"msg_subsonly":case"msg_timedout":case"no_help":case"no_permission":case"timeout_success":case"unban_success":case"unrecognized_cmd":case"usage_clear":case"usage_color":case"usage_commercial":case"usage_disconnect":case"usage_help":case"usage_host":case"usage_me":case"usage_mod":case"usage_mods":case"usage_r9k_on":case"usage_r9k_off":case"usage_slow_on":case"usage_slow_off":case"usage_subs_on":case"usage_subs_off":case"usage_timeout":case"usage_unban":case"usage_unhost":case"usage_unmod":case"whisper_invalid_self":case"whisper_limit_per_min":case"whisper_limit_per_sec":case"whisper_restricted_recipient":this.log.info("["+e.params[0]+"] "+e.params[1]),this.emit("notice",e.params[0],e.tags["msg-id"],e.params[1]);break;case"host_on":case"host_off":break;default:e.params[1].includes("Login unsuccessful")?(this.wasCloseCalled=!0,this.log.error("Login unsuccessful."),this.ws.close()):e.params[1].includes("Error logging in")?(this.wasCloseCalled=!0,this.log.error("Error logging in."),this.ws.close()):e.params[1].includes("Invalid NICK")?(this.wasCloseCalled=!0,this.log.error("Invalid NICK."),this.ws.close()):this.log.warn("Could not parse NOTICE from tmi.twitch.tv:\n"+e)}break;case"HOSTTARGET":if("-"===e.params[1].split(" ")[0])this.log.info("["+e.params[0]+"] Exited host mode."),this.emit("unhost",e.params[0],e.params[1].split(" ")[1]||"0");else{var y=e.params[1].split(" ")[1]||0;p.isInteger(y)||(y=0),this.log.info("["+e.params[0]+"] Now hosting "+e.params[1].split(" ")[0]+" for "+y+" viewer(s)."),this.emit("hosting",e.params[0],e.params[1].split(" ")[0],y)}break;case"CLEARCHAT":e.params.length>1?(this.log.info("["+e.params[0]+"] "+e.params[1]+" has been timed out."),this.emit("timeout",e.params[0],e.params[1])):(this.log.info("["+e.params[0]+"] Chat was cleared by a moderator."),this.emit("clearchat",e.params[0]));break;case"RECONNECT":this.log.info("Received RECONNECT request from Twitch.."),this.log.info("Disconnecting and reconnecting in "+this.reconnectTimer/1e3+" seconds.."),this.disconnect(),setTimeout(function(){t.connect()},this.reconnectTimer);break;case"USERSTATE":e.tags.username=this.username,"mod"===e.tags["user-type"]&&(this.moderators[this.lastJoined]||(this.moderators[this.lastJoined]=[]),this.moderators[this.lastJoined].indexOf(this.username)<0&&this.moderators[this.lastJoined].push(this.username)),this.getUsername().includes("justinfan")||this.userstate[p.normalizeChannel(e.params[0])]||(this.userstate[e.params[0]]=e.tags,this.lastJoined=e.params[0],this.channels.push(e.params[0]),this.log.info("Joined "+e.params[0]),this.emit("join",e.params[0],p.normalizeUsername(this.getUsername()))),this.userstate[e.params[0]]=e.tags;break;case"GLOBALUSERSTATE":this.globaluserstate=e.tags,"undefined"!=typeof e.tags["emote-sets"]&&this.emit("emotesets",e.tags["emote-sets"]);break;case"ROOMSTATE":e.tags.channel=this.lastJoined,this.emit("roomstate",e.params[0],e.tags),e.tags.hasOwnProperty("slow")&&!e.tags.hasOwnProperty("subs-only")&&("boolean"==typeof e.tags.slow?(this.log.info("["+e.params[0]+"] This room is no longer in slow mode."),this.emit("slow",e.params[0],!1,"0"),this.emit("slowmode",e.params[0],!1,"0")):(this.log.info("["+e.params[0]+"] This room is now in slow mode."),this.emit("slow",e.params[0],!0,e.tags.slow),this.emit("slowmode",e.params[0],!0,e.tags.slow)));break;default:this.log.warn("Could not parse message from tmi.twitch.tv:\n"+e)}else if("jtv"===e.prefix)switch(e.command){case"MODE":"+o"===e.params[1]?(this.moderators[e.params[0]]||(this.moderators[e.params[0]]=[]),this.moderators[e.params[0]].indexOf(e.params[2])<0&&this.moderators[e.params[0]].push(e.params[2]),this.emit("mod",e.params[0],e.params[2])):"-o"===e.params[1]&&(this.moderators[e.params[0]]||(this.moderators[e.params[0]]=[]),this.moderators[e.params[0]].filter(function(t){return t!=e.params[2]}),this.emit("unmod",e.params[0],e.params[2]));break;default:this.log.warn("Could not parse message from jtv:\n"+e)}else switch(e.command){case"353":this.emit("names",e.params[2],e.params[3].split(" "));break;case"366":break;case"JOIN":this.getUsername().includes("justinfan")&&this.username===e.prefix.split("!")[0]&&(this.lastJoined=e.params[0],this.channels.push(e.params[0]),this.log.info("Joined "+e.params[0]),this.emit("join",e.params[0],e.prefix.split("!")[0])),this.username!==e.prefix.split("!")[0]&&this.emit("join",e.params[0],e.prefix.split("!")[0]);break;case"PART":if(this.username===e.prefix.split("!")[0]){this.userstate[e.params[0]]&&delete this.userstate[e.params[0]];var w=this.channels.indexOf(e.params[0]);-1!==w&&this.channels.splice(w,1),this.log.info("Left "+e.params[0])}this.emit("part",e.params[0],e.prefix.split("!")[0]);break;case"WHISPER":this.log.info("[WHISPER] <"+e.prefix.split("!")[0]+">: "+e.params[1]),this.emit("whisper",e.prefix.split("!")[0],e.params[1]);var b={username:e.prefix.split("!")[0],"message-type":"whisper"};this.emit("message",null,b,e.params[1],!1);break;case"PRIVMSG":if(e.tags.username=e.prefix.split("!")[0],"twitchnotify"===e.tags.username){if(e.params[1].includes("subscribed to"));else if(e.params[1].includes("just subscribed"))this.emit("subscription",e.params[0],e.params[1].split(" ")[0]);else if(e.params[1].includes("subscribed")&&e.params[1].includes("in a row")){var g=e.params[1].split(" "),_=g[g.length-5];this.emit("subanniversary",e.params[0],g[0],_)}}else"jtv"===e.tags.username?e.params[1].includes("is now hosting you for")?this.emit("hosted",e.params[0],p.normalizeUsername(e.params[1].split(" ")[0]),e.params[1].split(" ")[6]):e.params[1].includes("is now hosting you")&&this.emit("hosted",e.params[0],p.normalizeUsername(e.params[1].split(" ")[0]),0):e.params[1].match(/^\u0001ACTION ([^\u0001]+)\u0001$/)?(e.tags["message-type"]="action",this.log.info("["+e.params[0]+"] *<"+e.tags.username+">: "+e.params[1].match(/^\u0001ACTION ([^\u0001]+)\u0001$/)[1]),this.emit("action",e.params[0],e.tags,e.params[1].match(/^\u0001ACTION ([^\u0001]+)\u0001$/)[1],!1),this.emit("message",e.params[0],e.tags,e.params[1].match(/^\u0001ACTION ([^\u0001]+)\u0001$/)[1],!1)):(e.tags["message-type"]="chat",this.log.info("["+e.params[0]+"] <"+e.tags.username+">: "+e.params[1]),this.emit("chat",e.params[0],e.tags,e.params[1],!1),this.emit("message",e.params[0],e.tags,e.params[1],!1));break;default:this.log.warn("Could not parse message:\n"+e)}}},g.prototype.connect=function(){var e=this;return new Promise(function(t,r){e.reconnect="undefined"==typeof e.opts.connection.reconnect?!1:e.opts.connection.reconnect,e.server="undefined"==typeof e.opts.connection.server?"RANDOM":e.opts.connection.server,e.port="undefined"==typeof e.opts.connection.port?443:e.opts.connection.port,e.reconnectTimer=e.reconnectTimer+1e4,e.reconnectTimer>=6e4&&(e.reconnectTimer=6e4),"RANDOM"===e.server||"undefined"!=typeof e.opts.connection.random?l.getRandomServer("undefined"==typeof e.opts.connection.random?"chat":e.opts.connection.random,function(r){e.server=r.split(":")[0],e.port=r.split(":")[1],e._openConnection(),t([e.server,e.port])}):(e._openConnection(),t([e.server,e.port]))})},g.prototype._openConnection=function(){var e=this;l.isWebSocket(this.server,this.port,function(t){t?(e.ws=new d("ws://"+e.server+":"+e.port+"/","irc"),e.ws.onmessage=e._onMessage.bind(e),e.ws.onerror=e._onError.bind(e),e.ws.onclose=e._onClose.bind(e),e.ws.onopen=e._onOpen.bind(e)):(e.emit("disconnected","Sorry, we were unable to connect to chat."),e.reconnect&&!e.reconnecting?(e.reconnecting=!0,e.log.error("Could not connect to server. Trying to reconnect in "+e.reconnectTimer/1e3+" seconds.."),e.emit("reconnect"),setTimeout(function(){e.reconnecting=!1,e.connect()},e.reconnectTimer)):e.reconnecting||e.log.error("Could not connect to server."))})},g.prototype._onOpen=function(){m.isNull(this.ws)||1!==this.ws.readyState||(this.log.info("Connecting to "+this.server+" on port "+this.port+".."),this.emit("connecting",this.server,this.port),this.username="undefined"==typeof this.opts.identity.username?p.generateJustinfan():this.opts.identity.username,this.password="undefined"==typeof this.opts.identity.password?"SCHMOOPIIE":this.opts.identity.password,"SCHMOOPIIE"!==this.password&&(this.password=p.normalizePassword(this.password)),this.log.info("Sending authentication to server.."),this.emit("logon"),this.ws.send("CAP REQ :twitch.tv/tags twitch.tv/commands twitch.tv/membership"),this.ws.send("PASS "+this.password),this.ws.send("NICK "+this.username),this.ws.send("USER "+this.username+" 8 * :"+this.username))},g.prototype._onMessage=function(e){var t=this,r=e.data.split("\r\n");r.forEach(function(e){null!==e&&t.handleMessage(c(e))})},g.prototype._onError=function(){this.moderators={},this.userstate={},this.globaluserstate={},clearInterval(this.pingLoop),clearTimeout(this.pingTimeout),m.isNull(this.ws)?(this.log.error("Connection closed."),this.emit("disconnected","Connection closed.")):(this.log.error("Unable to connect."),this.emit("disconnected","Unable to connect.")),this.ws=null},g.prototype._onClose=function(){var e=this;this.moderators={},this.userstate={},this.globaluserstate={},clearInterval(this.pingLoop),clearTimeout(this.pingTimeout),this.wasCloseCalled?(this.wasCloseCalled=!1,this.log.info("Connection closed."),this.emit("disconnected","Connection closed.")):(this.emit("disconnected","Unable to connect to chat."),this.reconnect&&!this.reconnecting?(this.reconnecting=!0,this.log.error("Could not connect to server. Trying to reconnect in "+this.reconnectTimer/1e3+" seconds.."),this.emit("reconnect"),setTimeout(function(){e.reconnecting=!1,e.connect()},this.reconnectTimer)):this.reconnecting||this.log.error("Sorry, we were unable to connect to chat.")),this.ws=null},g.prototype._sendCommand=function(e,t){var r=this;return new Promise(function(n,i){if(m.isNull(r.ws)||2===r.ws.readyState||3===r.ws.readyState)i();else switch(t.toLowerCase()){case"/mods":case".mods":r.log.info("Executing command: "+t),r.def("eventMods",function(t,i){i.forEach(function(t){r.moderators[e]||(r.moderators[e]=[]),r.moderators[e].indexOf(t)<0&&r.moderators[e].push(t)}),n(i)}),r.ws.send("PRIVMSG "+p.normalizeChannel(e)+" :"+t);break;default:m.isNull(e)?(r.log.info("Executing command: "+t),r.ws.send(t),"PING"===t&&(r.latency=new Date,r.pingTimeout=setTimeout(function(){m.isNull(r.ws)||(r.wasCloseCalled=!1,r.log.error("Ping timeout."),r.ws.close(),clearInterval(r.pingLoop),clearTimeout(r.pingTimeout))},"undefined"==typeof r.opts.connection.timeout?9999:r.opts.connection.timeout))):(r.log.info("["+p.normalizeChannel(e)+"] Executing command: "+t),r.ws.send("PRIVMSG "+p.normalizeChannel(e)+" :"+t)),n()}})},g.prototype._sendMessage=function(e,t){var r=this;return new Promise(function(n,i){if(m.isNull(r.ws)||2===r.ws.readyState||3===r.ws.readyState||r.getUsername().includes("justinfan"))i();else{if(r.userstate[p.normalizeChannel(e)]||(r.userstate[p.normalizeChannel(e)]={}),t.length>=500){var o=p.splitLine(t,500);t=o[0],o.shift(),setTimeout(function(){r._sendMessage(e,o.join())},350)}r.ws.send("PRIVMSG "+p.normalizeChannel(e)+" :"+t),t.match(/^\u0001ACTION ([^\u0001]+)\u0001$/)?(r.userstate[p.normalizeChannel(e)]["message-type"]="action",r.log.info("["+p.normalizeChannel(e)+"] *<"+r.getUsername()+">: "+t.match(/^\u0001ACTION ([^\u0001]+)\u0001$/)[1]),r.emit("action",p.normalizeChannel(e),r.userstate[p.normalizeChannel(e)],t.match(/^\u0001ACTION ([^\u0001]+)\u0001$/)[1],!0),r.emit("message",p.normalizeChannel(e),r.userstate[p.normalizeChannel(e)],t.match(/^\u0001ACTION ([^\u0001]+)\u0001$/)[1],!0)):(r.userstate[p.normalizeChannel(e)]["message-type"]="chat",r.log.info("["+p.normalizeChannel(e)+"] <"+r.getUsername()+">: "+t),r.emit("chat",p.normalizeChannel(e),r.userstate[p.normalizeChannel(e)],t,!0),r.emit("message",p.normalizeChannel(e),r.userstate[p.normalizeChannel(e)],t,!0)),n()}})},g.prototype.getUsername=function(){return this.username},g.prototype.getOptions=function(){return this.opts},g.prototype.getChannels=function(){return this.channels},g.prototype.isMod=function(e,t){return this.moderators[p.normalizeChannel(e)]||(this.moderators[p.normalizeChannel(e)]=[]),this.moderators[p.normalizeChannel(e)].indexOf(p.normalizeUsername(t))>=0?!0:!1},g.prototype.readyState=function(){return m.isNull(this.ws)?"CLOSED":["CONNECTING","OPEN","CLOSING","CLOSED"][this.ws.readyState]},g.prototype.disconnect=function(){var e=this;return new Promise(function(t,r){m.isNull(e.ws)||3===e.ws.readyState?(e.log.error("Cannot disconnect from server. Socket is not opened or connection is already closing."),r()):(e.wasCloseCalled=!0,e.log.info("Disconnecting from server.."),e.ws.close(),t())})},g.prototype.utils={cronjobs:function(e,t){return new o.CronJob(e,function(){t()},null,!1)},levenshtein:function(e,t,r){var n=1,i=1,o=1;if(r="undefined"==typeof r?!1:r,r||(e=e.toLowerCase(),t=t.toLowerCase()),e==t)return 0;var s=e.length,a=t.length;if(0===s)return a*n;if(0===a)return s*o;var u=!1;try{u=!"0"[0]}catch(c){u=!0}u&&(e=e.split(""),t=t.split(""));var l,h,f,p,d,m,g=new Array(a+1),v=new Array(a+1);for(h=0;a>=h;h++)g[h]=h*n;for(l=0;s>l;l++){for(v[0]=g[0]+o,h=0;a>h;h++)f=g[h]+(e[l]==t[h]?0:i),p=g[h+1]+o,f>p&&(f=p),d=v[h]+n,f>d&&(f=d),v[h+1]=f;m=g,g=v,v=m}return f=g[a]},raffle:{init:function(e){this.raffleChannels||(this.raffleChannels={}),this.raffleChannels[p.normalizeChannel(e)]||(this.raffleChannels[p.normalizeChannel(e)]=[])},enter:function(e,t){this.init(e),this.raffleChannels[p.normalizeChannel(e)].push(t.toLowerCase())},leave:function(e,t){this.init(e);var r=this.raffleChannels[p.normalizeChannel(e)].indexOf(p.normalizeUsername(t));return r>=0?(this.raffleChannels[p.normalizeChannel(e)].splice(r,1),!0):!1},pick:function(e){this.init(e);var t=this.raffleChannels[p.normalizeChannel(e)].length;return t>=1?this.raffleChannels[p.normalizeChannel(e)][Math.floor(Math.random()*t)]:null},reset:function(e){this.init(e),this.raffleChannels[p.normalizeChannel(e)]=[]},count:function(e){return this.init(e),this.raffleChannels[p.normalizeChannel(e)]?this.raffleChannels[p.normalizeChannel(e)].length:0},isParticipating:function(e,t){return this.init(e),this.raffleChannels[p.normalizeChannel(e)].indexOf(p.normalizeUsername(t))>=0?!0:!1}},symbols:function(e){for(var t=0,r=0;r<e.length;r++){var n=e.substring(r,r+1).charCodeAt(0);(30>=n||n>=127||65533===n)&&t++}return Math.ceil(t/e.length*100)/100},uppercase:function(e){var t=e.length,r=e.match(/[A-Z]/g);return m.isNull(r)?0:r.length/t}},g.prototype.nosql={path:function(e){(void 0).database=new a(e)},insert:function(e,t){return"undefined"==typeof(void 0).database&&(void 0).path("./database"),new Promise(function(r,n){r((void 0).database.collection(e).insert(t))})},where:function(e,t){return"undefined"==typeof(void 0).database&&(void 0).path("./database"),new Promise(function(r,n){r((void 0).database.collection(e).where(t))})},get:function(e,t){return"undefined"==typeof(void 0).database&&(void 0).path("./database"),new Promise(function(r,n){r((void 0).database.collection(e).get(t)||null)})},list:function(e){return"undefined"==typeof(void 0).database&&(void 0).path("./database"),new Promise(function(t,r){t((void 0).database.collection(e).items)})},update:function(e,t,r){return"undefined"==typeof(void 0).database&&(void 0).path("./database"),new Promise(function(n,i){n((void 0).database.collection(e).update(t,r))})},replace:function(e,t,r){return"undefined"==typeof(void 0).database&&(void 0).path("./database"),new Promise(function(n,i){n((void 0).database.collection(e).replace(t,r))})},remove:function(e,t){return"undefined"==typeof(void 0).database&&(void 0).path("./database"),new Promise(function(r,n){r((void 0).database.collection(e).remove(t))})}},"undefined"==typeof window&&t.exports?t.exports=g:(window.irc={},window.irc.client=g)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./api":2,"./commands":4,"./logger":5,"./server":6,"./timer":7,"./utils":8,events:16,"irc-message":22,underscore:53,util:56,ws:57}],4:[function(e,t,r){"use strict";var n=e("underscore"),i=e("./utils");t.exports={action:function(e,t){return t="ACTION "+t+"",this._sendMessage(e,t)},ban:function(e,t){var r=this;return new Promise(function(o,s){i.promiseDelay(600).then(function(){s("timeout")}),n.isNull(r.ws)||2===r.ws.readyState||3===r.ws.readyState?s("disconnected"):n.isNull(e)||n.isNull(t)?s("usage_ban"):(r.log.info("["+i.normalizeChannel(e)+"] Executing command: /ban "+i.normalizeUsername(t)),r.ws.send("PRIVMSG "+i.normalizeChannel(e)+" :/ban "+i.normalizeUsername(t)),r.def("banError",function(r,n){""===n?o([e,t]):s(n)}))})},clear:function(e){return this._sendCommand(e,"/clear")},color:function o(e,o){return this._sendCommand(e,"/color "+o)},commercial:function(e,t){return t="undefined"==typeof t?30:t,this._sendCommand(e,"/commercial "+t)},host:function(e,t){return this._sendCommand(e,"/host "+i.normalizeUsername(t))},join:function(e){return this._sendCommand(null,"JOIN "+i.normalizeChannel(e))},mod:function(e,t){return this._sendCommand(e,"/mod "+i.normalizeUsername(t))},mods:function(e){return this._sendCommand(e,"/mods")},part:function(e){return this._sendCommand(null,"PART "+i.normalizeChannel(e))},leave:function(e){return this._sendCommand(null,"PART "+i.normalizeChannel(e))},ping:function(){return this._sendCommand(null,"PING")},r9kbeta:function(e){return this._sendCommand(e,"/r9kbeta")},r9kmode:function(e){return this._sendCommand(e,"/r9kbeta")},r9kbetaoff:function(e){return this._sendCommand(e,"/r9kbetaoff")},r9kmodeoff:function(e){return this._sendCommand(e,"/r9kbetaoff")},raw:function(e){return this._sendCommand(null,e)},say:function(e,t){return t.toLowerCase().startsWith("/me ")||t.toLowerCase().startsWith("\\me ")?this.action(e,t.substr(4)):t.startsWith(".")||t.startsWith("/")||t.startsWith("\\")?this._sendCommand(e,t):this._sendMessage(e,t)},slow:function(e,t){return t="undefined"==typeof t?300:t,this._sendCommand(e,"/slow "+t)},slowmode:function(e,t){return t="undefined"==typeof t?300:t,this._sendCommand(e,"/slow "+t)},slowoff:function(e){return this._sendCommand(e,"/slowoff")},slowmodeoff:function(e){return this._sendCommand(e,"/slowoff")},subscribers:function(e){return this._sendCommand(e,"/subscribers")},subscribersoff:function(e){return this._sendCommand(e,"/subscribersoff")},timeout:function(e,t,r){return r="undefined"==typeof r?300:r,t="undefined"==typeof t?"Kappa":t,this._sendCommand(e,"/timeout "+t+" "+r)},unban:function(e,t){return this._sendCommand(e,"/unban "+i.normalizeUsername(t))},unhost:function(e){return this._sendCommand(e,"/unhost")},unmod:function(e,t){return this._sendCommand(e,"/unmod "+i.normalizeUsername(t))},whisper:function(e,t){return this._sendCommand("#jtv","/w "+i.normalizeUsername(e)+" "+t)}}},{"./utils":8,underscore:53}],5:[function(e,t,r){"use strict";function n(){}var i=e("bunyan"),o=e("underscore");n.prototype.write=function(e){var t=e.msg||e.raw;o.isObject(t)&&!o.isNull(t)&&(t=JSON.stringify(t));var r=e.time.getHours(),n=e.time.getMinutes(),s=r>=12?"pm":"am";r%=12,r=r?r:12,r=10>r?"0"+r:r,n=10>n?"0"+n:n,console.log("[%s] %s: %s",r+":"+n+s,i.nameFromLevel[e.level],t)};var s=function(e,t,r){return i.createLogger({name:e,streams:[{level:t,stream:new n,type:r}]})};r.createLogger=s},{bunyan:14,underscore:53}],6:[function(e,t,r){"use strict";function n(e,t){i(function(){switch(e){case"event":case"events":t(c[Math.floor(Math.random()*c.length)]);break;case"group":case"groups":t(l[Math.floor(Math.random()*l.length)]);break;default:t(u[Math.floor(Math.random()*u.length)])}})}function i(e){var t=s.get({host:"www.tmijs.org",path:"/api/servers/",withCredentials:!1,protocol:"http:"},function(t){var r="";t.on("data",function(e){r+=e}),t.on("end",function(){return 200===t.statusCode&&(u=JSON.parse(r).chat_servers,c=JSON.parse(r).event_servers,l=JSON.parse(r).group_servers),e(null)}),t.on("error",function(){return e(null)})});t.on("error",function(){return e(null)})}function o(e,t,r){try{var n=new a("ws://"+e+":"+t+"/","irc");n.onerror=function(){return r(!1)},n.onopen=function(){return n.close(),r(!0)}}catch(i){return r(!1)}}var s=e("http"),a=e("ws"),u=["192.16.64.145:80","199.9.248.236:80","192.16.64.209:80","199.9.251.168:80","192.16.64.177:80","192.16.64.152:80","192.16.64.51:80","192.16.64.11:80","192.16.70.169:80","192.16.64.146:80","192.16.64.206:80","192.16.64.208:80","192.16.64.179:80","192.16.64.210:80","192.16.64.175:80","192.16.64.155:80","192.16.64.205:80","192.16.64.207:80","192.16.64.211:80","192.16.64.176:80","192.16.64.37:80","192.16.64.178:80","192.16.64.144:80","192.16.64.45:80","192.16.64.174:80","192.16.64.145:443"],c=["192.16.64.214:80","192.16.64.173:80","192.16.64.150:80","192.16.64.213:80","192.16.64.181:80","192.16.70.170:80","192.16.64.143:80","192.16.64.182:80","199.9.252.54:80","192.16.70.154:80"],l=["199.9.253.120:80","192.16.64.212:80","192.16.64.180:80","199.9.253.119:80"];r.getRandomServer=n,r.isWebSocket=o},{http:17,ws:57}],7:[function(e,t,r){"use strict";function n(e){this.queue=[],this.index=0,this.defaultDelay=e||3e3}n.prototype.add=function(e,t){this.queue.push({fn:e,delay:t})},n.prototype.run=function(e){(e||0===e)&&(this.index=e),this.next()},n.prototype.next=function i(){var e=this,t=this.index++,r=this.queue[t],i=this.queue[this.index];r&&(r.fn(),i&&setTimeout(function(){e.next()},i.delay||this.defaultDelay))},n.prototype.reset=function(){this.index=0},n.prototype.clear=function(){this.index=0,this.queue=[]},r.queue=n},{}],8:[function(e,t,r){(function(r){"use strict";var n=e("underscore.string/toNumber"),i=e("underscore.string/ltrim");t.exports={generateJustinfan:function(){return"justinfan"+Math.floor(8e4*Math.random()+1e3)},isInteger:function(e){var t=n(e,0);return!isNaN(t)},isNodeJS:function(){try{return(t.exports="object"==typeof r&&"[object process]"===Object.prototype.toString.call(r))?!0:!1}catch(e){return!1}},isURL:function(e){var t=new RegExp("^(?:(?:https?|ftp)://)(?:\\S+(?::\\S*)?@)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))\\.?)(?::\\d{2,5})?(?:[/?#]\\S*)?$","i");return t.test(e)?!0:!1},mergeRecursive:function(e,t){for(var r in t)try{t[r].constructor==Object?e[r]=MergeRecursive(e[r],t[r]):e[r]=t[r]}catch(n){e[r]=t[r]}return e},normalizeChannel:function(e){return"#"+i(e.toLowerCase(),"#")},normalizeUsername:function(e){return i(e.toLowerCase(),"#")},normalizePassword:function(e){return"oauth:"+i(e.toLowerCase(),"oauth:")},promiseDelay:function(e){return new Promise(function(t){setTimeout(t,e)})},splitLine:function(e,t){var r,n,i=[],o="",s=e.split(" ");for(r=0;r<s.length;)n=this.addWord(o,s[r]),n.length>t?(0==o.length&&(o=n,r++),i.push(o),o=""):(o=n,r++);return o.length>0&&i.push(o),i},addWord:function(e,t){return 0!=e.length&&(e+=" "),e+=t}}}).call(this,e("_process"))},{_process:28,"underscore.string/ltrim":50,"underscore.string/toNumber":51}],9:[function(e,t,r){!function(){function e(e){this.message=e}var t="undefined"!=typeof r?r:this,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";e.prototype=new Error,e.prototype.name="InvalidCharacterError",t.btoa||(t.btoa=function(t){for(var r,i,o=0,s=n,a="";t.charAt(0|o)||(s="=",o%1);a+=s.charAt(63&r>>8-o%1*8)){if(i=t.charCodeAt(o+=.75),i>255)throw new e("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");r=r<<8|i}return a}),t.atob||(t.atob=function(t){if(t=t.replace(/=+$/,""),t.length%4==1)throw new e("'atob' failed: The string to be decoded is not correctly encoded.");for(var r,i,o=0,s=0,a="";i=t.charAt(s++);~i&&(r=o%4?64*r+i:i,o++%4)?a+=String.fromCharCode(255&r>>(-2*o&6)):0)i=n.indexOf(i);return a})}()},{}],10:[function(e,t,r){function n(e,t){return p.isUndefined(t)?""+t:p.isNumber(t)&&!isFinite(t)?t.toString():p.isFunction(t)||p.isRegExp(t)?t.toString():t}function i(e,t){return p.isString(e)?e.length<t?e:e.slice(0,t):e}function o(e){return i(JSON.stringify(e.actual,n),128)+" "+e.operator+" "+i(JSON.stringify(e.expected,n),128)}function s(e,t,r,n,i){throw new g.AssertionError({message:r,actual:e,expected:t,operator:n,stackStartFunction:i})}function a(e,t){e||s(e,!0,t,"==",g.ok)}function u(e,t){if(e===t)return!0;if(p.isBuffer(e)&&p.isBuffer(t)){if(e.length!=t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}return p.isDate(e)&&p.isDate(t)?e.getTime()===t.getTime():p.isRegExp(e)&&p.isRegExp(t)?e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase:p.isObject(e)||p.isObject(t)?l(e,t):e==t;
}function c(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function l(e,t){if(p.isNullOrUndefined(e)||p.isNullOrUndefined(t))return!1;if(e.prototype!==t.prototype)return!1;if(p.isPrimitive(e)||p.isPrimitive(t))return e===t;var r=c(e),n=c(t);if(r&&!n||!r&&n)return!1;if(r)return e=d.call(e),t=d.call(t),u(e,t);var i,o,s=v(e),a=v(t);if(s.length!=a.length)return!1;for(s.sort(),a.sort(),o=s.length-1;o>=0;o--)if(s[o]!=a[o])return!1;for(o=s.length-1;o>=0;o--)if(i=s[o],!u(e[i],t[i]))return!1;return!0}function h(e,t){return e&&t?"[object RegExp]"==Object.prototype.toString.call(t)?t.test(e):e instanceof t?!0:t.call({},e)===!0?!0:!1:!1}function f(e,t,r,n){var i;p.isString(r)&&(n=r,r=null);try{t()}catch(o){i=o}if(n=(r&&r.name?" ("+r.name+").":".")+(n?" "+n:"."),e&&!i&&s(i,r,"Missing expected exception"+n),!e&&h(i,r)&&s(i,r,"Got unwanted exception"+n),e&&i&&r&&!h(i,r)||!e&&i)throw i}var p=e("util/"),d=Array.prototype.slice,m=Object.prototype.hasOwnProperty,g=t.exports=a;g.AssertionError=function(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=o(this),this.generatedMessage=!0);var t=e.stackStartFunction||s;if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{var r=new Error;if(r.stack){var n=r.stack,i=t.name,a=n.indexOf("\n"+i);if(a>=0){var u=n.indexOf("\n",a+1);n=n.substring(u+1)}this.stack=n}}},p.inherits(g.AssertionError,Error),g.fail=s,g.ok=a,g.equal=function(e,t,r){e!=t&&s(e,t,r,"==",g.equal)},g.notEqual=function(e,t,r){e==t&&s(e,t,r,"!=",g.notEqual)},g.deepEqual=function(e,t,r){u(e,t)||s(e,t,r,"deepEqual",g.deepEqual)},g.notDeepEqual=function(e,t,r){u(e,t)&&s(e,t,r,"notDeepEqual",g.notDeepEqual)},g.strictEqual=function(e,t,r){e!==t&&s(e,t,r,"===",g.strictEqual)},g.notStrictEqual=function(e,t,r){e===t&&s(e,t,r,"!==",g.notStrictEqual)},g["throws"]=function(e,t,r){f.apply(this,[!0].concat(d.call(arguments)))},g.doesNotThrow=function(e,t){f.apply(this,[!1].concat(d.call(arguments)))},g.ifError=function(e){if(e)throw e};var v=Object.keys||function(e){var t=[];for(var r in e)m.call(e,r)&&t.push(r);return t}},{"util/":56}],11:[function(e,t,r){var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(e){"use strict";function t(e){var t=e.charCodeAt(0);return t===s||t===h?62:t===a||t===f?63:u>t?-1:u+10>t?t-u+26+26:l+26>t?t-l:c+26>t?t-c+26:void 0}function r(e){function r(e){c[h++]=e}var n,i,s,a,u,c;if(e.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var l=e.length;u="="===e.charAt(l-2)?2:"="===e.charAt(l-1)?1:0,c=new o(3*e.length/4-u),s=u>0?e.length-4:e.length;var h=0;for(n=0,i=0;s>n;n+=4,i+=3)a=t(e.charAt(n))<<18|t(e.charAt(n+1))<<12|t(e.charAt(n+2))<<6|t(e.charAt(n+3)),r((16711680&a)>>16),r((65280&a)>>8),r(255&a);return 2===u?(a=t(e.charAt(n))<<2|t(e.charAt(n+1))>>4,r(255&a)):1===u&&(a=t(e.charAt(n))<<10|t(e.charAt(n+1))<<4|t(e.charAt(n+2))>>2,r(a>>8&255),r(255&a)),c}function i(e){function t(e){return n.charAt(e)}function r(e){return t(e>>18&63)+t(e>>12&63)+t(e>>6&63)+t(63&e)}var i,o,s,a=e.length%3,u="";for(i=0,s=e.length-a;s>i;i+=3)o=(e[i]<<16)+(e[i+1]<<8)+e[i+2],u+=r(o);switch(a){case 1:o=e[e.length-1],u+=t(o>>2),u+=t(o<<4&63),u+="==";break;case 2:o=(e[e.length-2]<<8)+e[e.length-1],u+=t(o>>10),u+=t(o>>4&63),u+=t(o<<2&63),u+="="}return u}var o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="+".charCodeAt(0),a="/".charCodeAt(0),u="0".charCodeAt(0),c="a".charCodeAt(0),l="A".charCodeAt(0),h="-".charCodeAt(0),f="_".charCodeAt(0);e.toByteArray=r,e.fromByteArray=i}("undefined"==typeof r?this.base64js={}:r)},{}],12:[function(e,t,r){},{}],13:[function(e,t,r){(function(t){function n(){return i.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function i(e){return this instanceof i?(this.length=0,this.parent=void 0,"number"==typeof e?o(this,e):"string"==typeof e?s(this,e,arguments.length>1?arguments[1]:"utf8"):a(this,e)):arguments.length>1?new i(e,arguments[1]):new i(e)}function o(e,t){if(e=d(e,0>t?0:0|m(t)),!i.TYPED_ARRAY_SUPPORT)for(var r=0;t>r;r++)e[r]=0;return e}function s(e,t,r){("string"!=typeof r||""===r)&&(r="utf8");var n=0|v(t,r);return e=d(e,n),e.write(t,r),e}function a(e,t){if(i.isBuffer(t))return u(e,t);if(X(t))return c(e,t);if(null==t)throw new TypeError("must start with number, buffer, array or string");if("undefined"!=typeof ArrayBuffer){if(t.buffer instanceof ArrayBuffer)return l(e,t);if(t instanceof ArrayBuffer)return h(e,t)}return t.length?f(e,t):p(e,t)}function u(e,t){var r=0|m(t.length);return e=d(e,r),t.copy(e,0,0,r),e}function c(e,t){var r=0|m(t.length);e=d(e,r);for(var n=0;r>n;n+=1)e[n]=255&t[n];return e}function l(e,t){var r=0|m(t.length);e=d(e,r);for(var n=0;r>n;n+=1)e[n]=255&t[n];return e}function h(e,t){return i.TYPED_ARRAY_SUPPORT?(t.byteLength,e=i._augment(new Uint8Array(t))):e=l(e,new Uint8Array(t)),e}function f(e,t){var r=0|m(t.length);e=d(e,r);for(var n=0;r>n;n+=1)e[n]=255&t[n];return e}function p(e,t){var r,n=0;"Buffer"===t.type&&X(t.data)&&(r=t.data,n=0|m(r.length)),e=d(e,n);for(var i=0;n>i;i+=1)e[i]=255&r[i];return e}function d(e,t){i.TYPED_ARRAY_SUPPORT?(e=i._augment(new Uint8Array(t)),e.__proto__=i.prototype):(e.length=t,e._isBuffer=!0);var r=0!==t&&t<=i.poolSize>>>1;return r&&(e.parent=V),e}function m(e){if(e>=n())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n().toString(16)+" bytes");return 0|e}function g(e,t){if(!(this instanceof g))return new g(e,t);var r=new i(e,t);return delete r.parent,r}function v(e,t){"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var n=!1;;)switch(t){case"ascii":case"binary":case"raw":case"raws":return r;case"utf8":case"utf-8":return F(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return J(e).length;default:if(n)return F(e).length;t=(""+t).toLowerCase(),n=!0}}function y(e,t,r){var n=!1;if(t=0|t,r=void 0===r||r===1/0?this.length:0|r,e||(e="utf8"),0>t&&(t=0),r>this.length&&(r=this.length),t>=r)return"";for(;;)switch(e){case"hex":return R(this,t,r);case"utf8":case"utf-8":return A(this,t,r);case"ascii":return O(this,t,r);case"binary":return k(this,t,r);case"base64":return C(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function w(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n),n>i&&(n=i)):n=i;var o=t.length;if(o%2!==0)throw new Error("Invalid hex string");n>o/2&&(n=o/2);for(var s=0;n>s;s++){var a=parseInt(t.substr(2*s,2),16);if(isNaN(a))throw new Error("Invalid hex string");e[r+s]=a}return s}function b(e,t,r,n){return H(F(t,e.length-r),e,r,n)}function _(e,t,r,n){return H(Y(t),e,r,n)}function E(e,t,r,n){return _(e,t,r,n)}function S(e,t,r,n){return H(J(t),e,r,n)}function x(e,t,r,n){return H(W(t,e.length-r),e,r,n)}function C(e,t,r){return 0===t&&r===e.length?G.fromByteArray(e):G.fromByteArray(e.slice(t,r))}function A(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;r>i;){var o=e[i],s=null,a=o>239?4:o>223?3:o>191?2:1;if(r>=i+a){var u,c,l,h;switch(a){case 1:128>o&&(s=o);break;case 2:u=e[i+1],128===(192&u)&&(h=(31&o)<<6|63&u,h>127&&(s=h));break;case 3:u=e[i+1],c=e[i+2],128===(192&u)&&128===(192&c)&&(h=(15&o)<<12|(63&u)<<6|63&c,h>2047&&(55296>h||h>57343)&&(s=h));break;case 4:u=e[i+1],c=e[i+2],l=e[i+3],128===(192&u)&&128===(192&c)&&128===(192&l)&&(h=(15&o)<<18|(63&u)<<12|(63&c)<<6|63&l,h>65535&&1114112>h&&(s=h))}}null===s?(s=65533,a=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|1023&s),n.push(s),i+=a}return T(n)}function T(e){var t=e.length;if(K>=t)return String.fromCharCode.apply(String,e);for(var r="",n=0;t>n;)r+=String.fromCharCode.apply(String,e.slice(n,n+=K));return r}function O(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;r>i;i++)n+=String.fromCharCode(127&e[i]);return n}function k(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;r>i;i++)n+=String.fromCharCode(e[i]);return n}function R(e,t,r){var n=e.length;(!t||0>t)&&(t=0),(!r||0>r||r>n)&&(r=n);for(var i="",o=t;r>o;o++)i+=q(e[o]);return i}function j(e,t,r){for(var n=e.slice(t,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function L(e,t,r){if(e%1!==0||0>e)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function I(e,t,r,n,o,s){if(!i.isBuffer(e))throw new TypeError("buffer must be a Buffer instance");if(t>o||s>t)throw new RangeError("value is out of bounds");if(r+n>e.length)throw new RangeError("index out of range")}function U(e,t,r,n){0>t&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-r,2);o>i;i++)e[r+i]=(t&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function N(e,t,r,n){0>t&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-r,4);o>i;i++)e[r+i]=t>>>8*(n?i:3-i)&255}function M(e,t,r,n,i,o){if(t>i||o>t)throw new RangeError("value is out of bounds");if(r+n>e.length)throw new RangeError("index out of range");if(0>r)throw new RangeError("index out of range")}function P(e,t,r,n,i){return i||M(e,t,r,4,3.4028234663852886e38,-3.4028234663852886e38),$.write(e,t,r,n,23,4),r+4}function B(e,t,r,n,i){return i||M(e,t,r,8,1.7976931348623157e308,-1.7976931348623157e308),$.write(e,t,r,n,52,8),r+8}function z(e){if(e=D(e).replace(Q,""),e.length<2)return"";for(;e.length%4!==0;)e+="=";return e}function D(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function q(e){return 16>e?"0"+e.toString(16):e.toString(16)}function F(e,t){t=t||1/0;for(var r,n=e.length,i=null,o=[],s=0;n>s;s++){if(r=e.charCodeAt(s),r>55295&&57344>r){if(!i){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(t-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(56320>r){(t-=3)>-1&&o.push(239,191,189),i=r;continue}r=i-55296<<10|r-56320|65536}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,128>r){if((t-=1)<0)break;o.push(r)}else if(2048>r){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(65536>r){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(1114112>r))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function Y(e){for(var t=[],r=0;r<e.length;r++)t.push(255&e.charCodeAt(r));return t}function W(e,t){for(var r,n,i,o=[],s=0;s<e.length&&!((t-=2)<0);s++)r=e.charCodeAt(s),n=r>>8,i=r%256,o.push(i),o.push(n);return o}function J(e){return G.toByteArray(z(e))}function H(e,t,r,n){for(var i=0;n>i&&!(i+r>=t.length||i>=e.length);i++)t[i+r]=e[i];return i}var G=e("base64-js"),$=e("ieee754"),X=e("is-array");r.Buffer=i,r.SlowBuffer=g,r.INSPECT_MAX_BYTES=50,i.poolSize=8192;var V={};i.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){function e(){}try{var t=new Uint8Array(1);return t.foo=function(){return 42},t.constructor=e,42===t.foo()&&t.constructor===e&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(r){return!1}}(),i.TYPED_ARRAY_SUPPORT&&(i.prototype.__proto__=Uint8Array.prototype,i.__proto__=Uint8Array),i.isBuffer=function(e){return!(null==e||!e._isBuffer)},i.compare=function(e,t){if(!i.isBuffer(e)||!i.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,n=t.length,o=0,s=Math.min(r,n);s>o&&e[o]===t[o];)++o;return o!==s&&(r=e[o],n=t[o]),n>r?-1:r>n?1:0},i.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},i.concat=function(e,t){if(!X(e))throw new TypeError("list argument must be an Array of Buffers.");if(0===e.length)return new i(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;r++)t+=e[r].length;var n=new i(t),o=0;for(r=0;r<e.length;r++){var s=e[r];s.copy(n,o),o+=s.length}return n},i.byteLength=v,i.prototype.length=void 0,i.prototype.parent=void 0,i.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?A(this,0,e):y.apply(this,arguments)},i.prototype.equals=function(e){if(!i.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:0===i.compare(this,e)},i.prototype.inspect=function(){var e="",t=r.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},i.prototype.compare=function(e){if(!i.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?0:i.compare(this,e)},i.prototype.indexOf=function(e,t){function r(e,t,r){for(var n=-1,i=0;r+i<e.length;i++)if(e[r+i]===t[-1===n?0:i-n]){if(-1===n&&(n=i),i-n+1===t.length)return r+n}else n=-1;return-1}if(t>2147483647?t=2147483647:-2147483648>t&&(t=-2147483648),t>>=0,0===this.length)return-1;if(t>=this.length)return-1;if(0>t&&(t=Math.max(this.length+t,0)),"string"==typeof e)return 0===e.length?-1:String.prototype.indexOf.call(this,e,t);if(i.isBuffer(e))return r(this,e,t);if("number"==typeof e)return i.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,e,t):r(this,[e],t);throw new TypeError("val must be string, number or Buffer")},i.prototype.get=function(e){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(e)},i.prototype.set=function(e,t){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(e,t)},i.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else if(isFinite(t))t=0|t,isFinite(r)?(r=0|r,void 0===n&&(n="utf8")):(n=r,r=void 0);else{var i=n;n=t,t=0|r,r=i}var o=this.length-t;if((void 0===r||r>o)&&(r=o),e.length>0&&(0>r||0>t)||t>this.length)throw new RangeError("attempt to write outside buffer bounds");n||(n="utf8");for(var s=!1;;)switch(n){case"hex":return w(this,e,t,r);case"utf8":case"utf-8":return b(this,e,t,r);case"ascii":return _(this,e,t,r);case"binary":return E(this,e,t,r);case"base64":return S(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x(this,e,t,r);default:if(s)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),s=!0}},i.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var K=4096;i.prototype.slice=function(e,t){var r=this.length;e=~~e,t=void 0===t?r:~~t,0>e?(e+=r,0>e&&(e=0)):e>r&&(e=r),0>t?(t+=r,0>t&&(t=0)):t>r&&(t=r),e>t&&(t=e);var n;if(i.TYPED_ARRAY_SUPPORT)n=i._augment(this.subarray(e,t));else{var o=t-e;n=new i(o,void 0);for(var s=0;o>s;s++)n[s]=this[s+e]}return n.length&&(n.parent=this.parent||this),n},i.prototype.readUIntLE=function(e,t,r){e=0|e,t=0|t,r||L(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n},i.prototype.readUIntBE=function(e,t,r){e=0|e,t=0|t,r||L(e,t,this.length);for(var n=this[e+--t],i=1;t>0&&(i*=256);)n+=this[e+--t]*i;return n},i.prototype.readUInt8=function(e,t){return t||L(e,1,this.length),this[e]},i.prototype.readUInt16LE=function(e,t){return t||L(e,2,this.length),this[e]|this[e+1]<<8},i.prototype.readUInt16BE=function(e,t){return t||L(e,2,this.length),this[e]<<8|this[e+1]},i.prototype.readUInt32LE=function(e,t){return t||L(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},i.prototype.readUInt32BE=function(e,t){return t||L(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},i.prototype.readIntLE=function(e,t,r){e=0|e,t=0|t,r||L(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*t)),n},i.prototype.readIntBE=function(e,t,r){e=0|e,t=0|t,r||L(e,t,this.length);for(var n=t,i=1,o=this[e+--n];n>0&&(i*=256);)o+=this[e+--n]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*t)),o},i.prototype.readInt8=function(e,t){return t||L(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},i.prototype.readInt16LE=function(e,t){t||L(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},i.prototype.readInt16BE=function(e,t){t||L(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},i.prototype.readInt32LE=function(e,t){return t||L(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},i.prototype.readInt32BE=function(e,t){return t||L(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},i.prototype.readFloatLE=function(e,t){return t||L(e,4,this.length),$.read(this,e,!0,23,4)},i.prototype.readFloatBE=function(e,t){return t||L(e,4,this.length),$.read(this,e,!1,23,4)},i.prototype.readDoubleLE=function(e,t){return t||L(e,8,this.length),$.read(this,e,!0,52,8)},i.prototype.readDoubleBE=function(e,t){return t||L(e,8,this.length),$.read(this,e,!1,52,8)},i.prototype.writeUIntLE=function(e,t,r,n){e=+e,t=0|t,r=0|r,n||I(this,e,t,r,Math.pow(2,8*r),0);var i=1,o=0;for(this[t]=255&e;++o<r&&(i*=256);)this[t+o]=e/i&255;return t+r},i.prototype.writeUIntBE=function(e,t,r,n){e=+e,t=0|t,r=0|r,n||I(this,e,t,r,Math.pow(2,8*r),0);var i=r-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+r},i.prototype.writeUInt8=function(e,t,r){return e=+e,t=0|t,r||I(this,e,t,1,255,0),i.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=e,t+1},i.prototype.writeUInt16LE=function(e,t,r){return e=+e,t=0|t,r||I(this,e,t,2,65535,0),i.TYPED_ARRAY_SUPPORT?(this[t]=e,this[t+1]=e>>>8):U(this,e,t,!0),t+2},i.prototype.writeUInt16BE=function(e,t,r){return e=+e,t=0|t,r||I(this,e,t,2,65535,0),i.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=e):U(this,e,t,!1),t+2},i.prototype.writeUInt32LE=function(e,t,r){return e=+e,t=0|t,r||I(this,e,t,4,4294967295,0),i.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=e):N(this,e,t,!0),t+4},i.prototype.writeUInt32BE=function(e,t,r){return e=+e,t=0|t,r||I(this,e,t,4,4294967295,0),i.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e):N(this,e,t,!1),t+4},i.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t=0|t,!n){var i=Math.pow(2,8*r-1);I(this,e,t,r,i-1,-i)}var o=0,s=1,a=0>e?1:0;for(this[t]=255&e;++o<r&&(s*=256);)this[t+o]=(e/s>>0)-a&255;return t+r},i.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t=0|t,!n){var i=Math.pow(2,8*r-1);I(this,e,t,r,i-1,-i)}var o=r-1,s=1,a=0>e?1:0;for(this[t+o]=255&e;--o>=0&&(s*=256);)this[t+o]=(e/s>>0)-a&255;return t+r},i.prototype.writeInt8=function(e,t,r){return e=+e,t=0|t,r||I(this,e,t,1,127,-128),i.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),0>e&&(e=255+e+1),this[t]=e,t+1},i.prototype.writeInt16LE=function(e,t,r){return e=+e,t=0|t,r||I(this,e,t,2,32767,-32768),i.TYPED_ARRAY_SUPPORT?(this[t]=e,this[t+1]=e>>>8):U(this,e,t,!0),t+2},i.prototype.writeInt16BE=function(e,t,r){return e=+e,t=0|t,r||I(this,e,t,2,32767,-32768),i.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=e):U(this,e,t,!1),t+2},i.prototype.writeInt32LE=function(e,t,r){return e=+e,t=0|t,r||I(this,e,t,4,2147483647,-2147483648),i.TYPED_ARRAY_SUPPORT?(this[t]=e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):N(this,e,t,!0),t+4},i.prototype.writeInt32BE=function(e,t,r){return e=+e,t=0|t,r||I(this,e,t,4,2147483647,-2147483648),0>e&&(e=4294967295+e+1),i.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e):N(this,e,t,!1),t+4},i.prototype.writeFloatLE=function(e,t,r){return P(this,e,t,!0,r)},i.prototype.writeFloatBE=function(e,t,r){return P(this,e,t,!1,r)},i.prototype.writeDoubleLE=function(e,t,r){return B(this,e,t,!0,r)},i.prototype.writeDoubleBE=function(e,t,r){return B(this,e,t,!1,r)},i.prototype.copy=function(e,t,r,n){if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&r>n&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(0>t)throw new RangeError("targetStart out of bounds");if(0>r||r>=this.length)throw new RangeError("sourceStart out of bounds");if(0>n)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var o,s=n-r;if(this===e&&t>r&&n>t)for(o=s-1;o>=0;o--)e[o+t]=this[o+r];else if(1e3>s||!i.TYPED_ARRAY_SUPPORT)for(o=0;s>o;o++)e[o+t]=this[o+r];else e._set(this.subarray(r,r+s),t);return s},i.prototype.fill=function(e,t,r){if(e||(e=0),t||(t=0),r||(r=this.length),t>r)throw new RangeError("end < start");if(r!==t&&0!==this.length){if(0>t||t>=this.length)throw new RangeError("start out of bounds");if(0>r||r>this.length)throw new RangeError("end out of bounds");var n;if("number"==typeof e)for(n=t;r>n;n++)this[n]=e;else{var i=F(e.toString()),o=i.length;for(n=t;r>n;n++)this[n]=i[n%o]}return this}},i.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(i.TYPED_ARRAY_SUPPORT)return new i(this).buffer;for(var e=new Uint8Array(this.length),t=0,r=e.length;r>t;t+=1)e[t]=this[t];return e.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser")};var Z=i.prototype;i._augment=function(e){return e.constructor=i,e._isBuffer=!0,e._set=e.set,e.get=Z.get,e.set=Z.set,e.write=Z.write,e.toString=Z.toString,e.toLocaleString=Z.toString,e.toJSON=Z.toJSON,e.equals=Z.equals,e.compare=Z.compare,e.indexOf=Z.indexOf,e.copy=Z.copy,e.slice=Z.slice,e.readUIntLE=Z.readUIntLE,e.readUIntBE=Z.readUIntBE,e.readUInt8=Z.readUInt8,e.readUInt16LE=Z.readUInt16LE,e.readUInt16BE=Z.readUInt16BE,e.readUInt32LE=Z.readUInt32LE,e.readUInt32BE=Z.readUInt32BE,e.readIntLE=Z.readIntLE,e.readIntBE=Z.readIntBE,e.readInt8=Z.readInt8,e.readInt16LE=Z.readInt16LE,e.readInt16BE=Z.readInt16BE,e.readInt32LE=Z.readInt32LE,e.readInt32BE=Z.readInt32BE,e.readFloatLE=Z.readFloatLE,e.readFloatBE=Z.readFloatBE,e.readDoubleLE=Z.readDoubleLE,e.readDoubleBE=Z.readDoubleBE,e.writeUInt8=Z.writeUInt8,e.writeUIntLE=Z.writeUIntLE,e.writeUIntBE=Z.writeUIntBE,e.writeUInt16LE=Z.writeUInt16LE,e.writeUInt16BE=Z.writeUInt16BE,e.writeUInt32LE=Z.writeUInt32LE,e.writeUInt32BE=Z.writeUInt32BE,e.writeIntLE=Z.writeIntLE,e.writeIntBE=Z.writeIntBE,e.writeInt8=Z.writeInt8,e.writeInt16LE=Z.writeInt16LE,e.writeInt16BE=Z.writeInt16BE,e.writeInt32LE=Z.writeInt32LE,e.writeInt32BE=Z.writeInt32BE,e.writeFloatLE=Z.writeFloatLE,e.writeFloatBE=Z.writeFloatBE,e.writeDoubleLE=Z.writeDoubleLE,e.writeDoubleBE=Z.writeDoubleBE,e.fill=Z.fill,e.inspect=Z.inspect,e.toArrayBuffer=Z.toArrayBuffer,e};var Q=/[^+\/0-9A-Za-z-_]/g}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"base64-js":11,ieee754:20,"is-array":24}],14:[function(e,t,r){(function(r,n){function i(e){if(null==e)return e;if(Array.isArray(e))return e.slice();if("object"==typeof e){var t={};return Object.keys(e).forEach(function(r){t[r]=e[r]}),t}return e}function o(){if(void 0!==this){var e={},t=Error.stackTraceLimit,r=Error.prepareStackTrace;return Error.stackTraceLimit=3,Error.captureStackTrace(this,o),Error.prepareStackTrace=function(t,r){var n=r[2];k&&(n=k.wrapCallSite(n)),e.file=n.getFileName(),e.line=n.getLineNumber();var i=n.getFunctionName();i&&(e.func=i)},this.stack,Error.stackTraceLimit=t,Error.prepareStackTrace=r,e}}function s(e,t){t||(t="    ");var r=e.split(/\r?\n/g);return t+r.join("\n"+t)}function a(e,t){if(x.ok(e),t){if(U[t])return;U[t]=!0}r.stderr.write(e+"\n")}function u(e){return U[e]}function c(){}function l(e){var t="string"==typeof e?q[e.toLowerCase()]:e;return t}function h(e,t,n){if(y("Logger start:",e),!(this instanceof h))return new h(e,t);var o;if(void 0!==t&&(o=e,e=t,!(o instanceof h)))throw new TypeError("invalid Logger creation: do not pass a second arg");if(!e)throw new TypeError("options (object) is required");if(o){if(e.name)throw new TypeError("invalid options.name: child cannot set logger name")}else if(!e.name)throw new TypeError("options.name (string) is required");if(e.stream&&e.streams)throw new TypeError('cannot mix "streams" and "stream" options');if(e.streams&&!Array.isArray(e.streams))throw new TypeError("invalid options.streams: must be an array");if(e.serializers&&("object"!=typeof e.serializers||Array.isArray(e.serializers)))throw new TypeError("invalid options.serializers: must be an object");if(C.call(this),o&&n){this._isSimpleChild=!0,this._level=o._level,this.streams=o.streams,this.serializers=o.serializers,this.src=o.src;for(var s=this.fields={},a=Object.keys(o.fields),u=0;u<a.length;u++){var l=a[u];s[l]=o.fields[l]}for(var f=Object.keys(e),u=0;u<f.length;u++){var l=f[u];s[l]=e[l]}}else{var p=this;if(o){this._level=o._level,this.streams=[];for(var u=0;u<o.streams.length;u++){var d=i(o.streams[u]);d.closeOnExit=!1,this.streams.push(d)}this.serializers=i(o.serializers),this.src=o.src,this.fields=i(o.fields),e.level&&this.level(e.level)}else this._level=Number.POSITIVE_INFINITY,this.streams=[],this.serializers=null,this.src=!1,this.fields={};if(!Y&&_){Y=_.createDTraceProvider("bunyan");for(var m in q){var g;W[q[m]]=g=Y.addProbe("log-"+m,"char *"),g.dtp=Y}Y.enable()}e.stream?p.addStream({type:"stream",stream:e.stream,closeOnExit:!1,level:e.level}):e.streams?e.streams.forEach(function(t){p.addStream(t,e.level)}):o&&e.level?this.level(e.level):o||(O?p.addStream({type:"raw",stream:new c,closeOnExit:!1,level:e.level}):p.addStream({type:"stream",stream:r.stdout,closeOnExit:!1,level:e.level})),e.serializers&&p.addSerializers(e.serializers),e.src&&(this.src=!0),y("Logger: ",p);var s=i(e);delete s.stream,delete s.level,delete s.streams,delete s.serializers,delete s.src,this.serializers&&this._applySerializers(s),s.hostname||(s.hostname=w.hostname()),s.pid||(s.pid=r.pid),Object.keys(s).forEach(function(e){p.fields[e]=s[e]})}}function f(e){return function(){function t(t){var a;t[0]instanceof Error?(s={err:r.serializers&&r.serializers.err?r.serializers.err(t[0]):h.stdSerializers.err(t[0])},a={err:!0},c=1===t.length?[s.err.message]:Array.prototype.slice.call(t,1)):"object"!=typeof t[0]&&null!==t[0]||Array.isArray(t[0])?(s=null,c=Array.prototype.slice.call(t)):n.isBuffer(t[0])?(s=null,c=Array.prototype.slice.call(t),c[0]=S.inspect(c[0])):(s=t[0],c=Array.prototype.slice.call(t,1));var u=i(r.fields),l=(u.level=e,s?i(s):null);return l&&(r.serializers&&r._applySerializers(l,a),Object.keys(l).forEach(function(e){u[e]=l[e]})),u.msg=j.apply(r,c),u.time||(u.time=new Date),r.src&&!u.src&&(u.src=o()),u.v=v,u}var r=this,s=null,c=arguments,l=null,f=null;if(this._emit){if(0===arguments.length)return this._level<=e;this._level>e||(f=t(c),l=this._emit(f)),W&&W[e].fire(function(){return[l||f&&r._emit(f,!0)||r._emit(t(c),!0)]})}else{var p="unbound";if(!u[p]){var d=o();a(j("bunyan usage error: %s:%s: attempt to log with an unbound log method: `this` is: %s",d.file,d.line,S.inspect(this)),p)}}}}function p(e){var t=e.stack||e.toString();if(e.cause&&"function"==typeof e.cause){var r=e.cause();r&&(t+="\nCaused by: "+p(r))}return t}function d(){var e=[];return function(t,r){return r&&"object"==typeof r?-1!==e.indexOf(r)?"[Circular]":(e.push(r),r):r}}function m(e){this.limit=e&&e.limit?e.limit:100,this.writable=!0,this.records=[],C.call(this)}var g="1.5.1",v=0,y=function(e){var t=["XXX: "+e].concat(Array.prototype.slice.call(arguments,1));console.error.apply(this,t)},y=function(){};if("undefined"==typeof window){var w=e("os"),b=e("fs");try{var _=e("dtrace-provider")}catch(E){_=null}}else var w={hostname:function(){return window.location.host}},b={},_=null;var S=e("util"),x=e("assert"),C=e("events").EventEmitter;try{var A=e("safe-json-stringify")}catch(E){A=null}r.env.BUNYAN_TEST_NO_SAFE_JSON_STRINGIFY&&(A=null);try{var T=e("mv")}catch(E){T=null}var O=function(){return"undefined"!=typeof window}();try{var k=e("source-map-support")}catch(R){k=null}var j=S.format;if(!j){var L=S.inspect,I=/%[sdj%]/g;j=function(e){if("string"!=typeof e){for(var t=[],r=0;r<arguments.length;r++)t.push(L(arguments[r]));return t.join(" ")}for(var r=1,n=arguments,i=n.length,o=String(e).replace(I,function(e){if(r>=i)return e;switch(e){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":return JSON.stringify(n[r++],d());case"%%":return"%";default:return e}}),s=n[r];i>r;s=n[++r])o+=null===s||"object"!=typeof s?" "+s:" "+L(s);return o}}var U={};c.prototype.write=function(e){e.level<P?console.log(e):e.level<B?console.info(e):e.level<z?console.warn(e):console.error(e)};var N=10,M=20,P=30,B=40,z=50,D=60,q={trace:N,debug:M,info:P,warn:B,error:z,fatal:D},F={};Object.keys(q).forEach(function(e){F[q[e]]=e});var Y=void 0,W=_&&{};S.inherits(h,C),h.prototype.addStream=function(e,t){var r=this;(null===t||void 0===t)&&(t=P),e=i(e);e.type;switch(e.type||(e.stream?e.type="stream":e.path&&(e.type="file")),e.raw="raw"===e.type,e.level?e.level=l(e.level):e.level=l(t),e.level<r._level&&(r._level=e.level),e.type){case"stream":e.closeOnExit||(e.closeOnExit=!1);break;case"file":e.stream?e.closeOnExit||(e.closeOnExit=!1):(e.stream=b.createWriteStream(e.path,{flags:"a",encoding:"utf8"}),e.stream.on("error",function(t){r.emit("error",t,e)}),e.closeOnExit||(e.closeOnExit=!0));break;case"rotating-file":x.ok(!e.stream,'"rotating-file" stream should not give a "stream"'),x.ok(e.path),x.ok(T,'"rotating-file" stream type is not supported: missing "mv" module'),e.stream=new J(e),e.closeOnExit||(e.closeOnExit=!0);break;case"raw":e.closeOnExit||(e.closeOnExit=!1);break;default:throw new TypeError('unknown stream type "'+e.type+'"')}r.streams.push(e),delete r.haveNonRawStreams},h.prototype.addSerializers=function(e){var t=this;t.serializers||(t.serializers={}),Object.keys(e).forEach(function(r){var n=e[r];if("function"!=typeof n)throw new TypeError(j('invalid serializer for "%s" field: must be a function',r));t.serializers[r]=n})},h.prototype.child=function(e,t){return new this.constructor(this,e||{},t)},h.prototype.reopenFileStreams=function(){var e=this;e.streams.forEach(function(t){"file"===t.type&&(t.stream&&(t.stream.end(),t.stream.destroySoon(),delete t.stream),t.stream=b.createWriteStream(t.path,{flags:"a",encoding:"utf8"}),t.stream.on("error",function(r){e.emit("error",r,t)}))})},h.prototype.level=function(e){if(void 0===e)return this._level;for(var t=l(e),r=this.streams.length,n=0;r>n;n++)this.streams[n].level=t;this._level=t},h.prototype.levels=function(e,t){if(void 0===e)return x.equal(t,void 0),this.streams.map(function(e){return e.level});var r;if("number"==typeof e){if(r=this.streams[e],void 0===r)throw new Error("invalid stream index: "+e)}else{for(var n=this.streams.length,i=0;n>i;i++){var o=this.streams[i];if(o.name===e){r=o;break}}if(!r)throw new Error(j('no stream with name "%s"',e))}if(void 0===t)return r.level;var s=l(t);r.level=s,s<this._level&&(this._level=s)},h.prototype._applySerializers=function(e,t){var r=this;y("_applySerializers: excludeFields",t),Object.keys(this.serializers).forEach(function(n){if(!(void 0===e[n]||t&&t[n])){y('_applySerializers; apply to "%s" key',n);try{e[n]=r.serializers[n](e[n])}catch(i){a(j('bunyan: ERROR: Exception thrown from the "%s" Bunyan serializer. This should never happen. This is a bugin that serializer function.\n%s',n,i.stack||i)),e[n]=j('(Error in Bunyan log "%s" serializer broke field. See stderr for details.)',n)}}})},h.prototype._emit=function(e,t){var r;if(void 0===this.haveNonRawStreams)for(this.haveNonRawStreams=!1,r=0;r<this.streams.length;r++)if(!this.streams[r].raw){this.haveNonRawStreams=!0;break}var n;if(t||this.haveNonRawStreams)try{n=JSON.stringify(e,d())+"\n"}catch(i){if(A)n=A(e)+"\n";else{var o=i.stack.split(/\n/g,2).join("\n");a('bunyan: ERROR: Exception in `JSON.stringify(rec)`. You can install the "safe-json-stringify" module to have Bunyan fallback to safer stringification. Record:\n'+s(j("%s\n%s",S.inspect(e),i.stack)),o),n=j("(Exception in JSON.stringify(rec): %j. See stderr for details.)\n",i.message)}}if(t)return n;var u=e.level;for(r=0;r<this.streams.length;r++){var c=this.streams[r];c.level<=u&&(y('writing log rec "%s" to "%s" stream (%d <= %d): %j',e.msg,c.type,c.level,u,e),c.stream.write(c.raw?e:n))}return n},h.prototype.trace=f(N),h.prototype.debug=f(M),h.prototype.info=f(P),h.prototype.warn=f(B),h.prototype.error=f(z),h.prototype.fatal=f(D),h.stdSerializers={},h.stdSerializers.req=function H(H){return H&&H.connection?{method:H.method,url:H.url,headers:H.headers,remoteAddress:H.connection.remoteAddress,
remotePort:H.connection.remotePort}:H},h.stdSerializers.res=function G(G){return G&&G.statusCode?{statusCode:G.statusCode,header:G._header}:G};var J=(h.stdSerializers.err=function $($){if(!$||!$.stack)return $;var e={message:$.message,name:$.name,stack:p($),code:$.code,signal:$.signal};return e},null);T&&(J=function(e){if(this.path=e.path,this.stream=b.createWriteStream(this.path,{flags:"a",encoding:"utf8"}),this.count=null==e.count?10:e.count,x.equal(typeof this.count,"number",j('rotating-file stream "count" is not a number: %j (%s) in %j',this.count,typeof this.count,this)),x.ok(this.count>=0,j('rotating-file stream "count" is not >= 0: %j in %j',this.count,this)),e.period){var t={hourly:"1h",daily:"1d",weekly:"1w",monthly:"1m",yearly:"1y"}[e.period]||e.period,r=/^([1-9][0-9]*)([hdwmy]|ms)$/.exec(t);if(!r)throw new Error(j('invalid period: "%s"',e.period));this.periodNum=Number(r[1]),this.periodScope=r[2]}else this.periodNum=1,this.periodScope="d";this.rotQueue=[],this.rotating=!1,this._setupNextRot()},S.inherits(J,C),J.prototype._setupNextRot=function(){var e=this;this.rotAt=this._nextRotTime();var t=this.rotAt-Date.now(),r=2147483647;t>r&&(t=r),this.timeout=setTimeout(function(){e.rotate()},t),"function"==typeof this.timeout.unref&&this.timeout.unref()},J.prototype._nextRotTime=function(e){var t=!1;t&&console.log("-- _nextRotTime: %s%s",this.periodNum,this.periodScope);var r=new Date;t&&console.log("  now local: %s",r),t&&console.log("    now utc: %s",r.toISOString());var n;switch(this.periodScope){case"ms":n=this.rotAt?this.rotAt+this.periodNum:Date.now()+this.periodNum;break;case"h":n=this.rotAt?this.rotAt+60*this.periodNum*60*1e3:Date.UTC(r.getUTCFullYear(),r.getUTCMonth(),r.getUTCDate(),r.getUTCHours()+1);break;case"d":n=this.rotAt?this.rotAt+24*this.periodNum*60*60*1e3:Date.UTC(r.getUTCFullYear(),r.getUTCMonth(),r.getUTCDate()+1);break;case"w":n=this.rotAt?this.rotAt+7*this.periodNum*24*60*60*1e3:Date.UTC(r.getUTCFullYear(),r.getUTCMonth(),r.getUTCDate()+(7-r.getUTCDay()));break;case"m":n=this.rotAt?Date.UTC(r.getUTCFullYear(),r.getUTCMonth()+this.periodNum,1):Date.UTC(r.getUTCFullYear(),r.getUTCMonth()+1,1);break;case"y":n=this.rotAt?Date.UTC(r.getUTCFullYear()+this.periodNum,0,1):Date.UTC(r.getUTCFullYear()+1,0,1);break;default:x.fail(j('invalid period scope: "%s"',this.periodScope))}if(t){console.log("  **rotAt**: %s (utc: %s)",n,new Date(n).toUTCString());var i=Date.now();console.log("        now: %s (%sms == %smin == %sh to go)",i,n-i,(n-i)/1e3/60,(n-i)/1e3/60/60)}return n},J.prototype.rotate=function(){function e(){var e=i.path+"."+String(s-1);0===s&&(e=i.path),s-=1,o&&console.log("rm %s",e),b.unlink(e,function(e){t()})}function t(){if(0===i.count||0>s)return n();var e=i.path,a=i.path+"."+String(s);s>0&&(e+="."+String(s-1)),s-=1,b.exists(e,function(s){s?(o&&console.log("[pid %s] mv %s %s",r.pid,e,a),T(e,a,function(e){e?(i.emit("error",e),n()):t()})):t()})}function n(){o&&console.log("[pid %s] open %s",r.pid,i.path),i.stream=b.createWriteStream(i.path,{flags:"a",encoding:"utf8"});for(var e=i.rotQueue,t=e.length,n=0;t>n;n++)i.stream.write(e[n]);i.rotQueue=[],i.rotating=!1,i.emit("drain"),i._setupNextRot()}var i=this,o=!1;if(i.rotAt&&i.rotAt>Date.now())return i._setupNextRot();if(o&&console.log("-- [%s, pid=%s] rotating %s",new Date,r.pid,i.path),i.rotating)throw new TypeError("cannot start a rotation when already rotating");i.rotating=!0,i.stream.end();var s=this.count;e()},J.prototype.write=function(e){return this.rotating?(this.rotQueue.push(e),!1):this.stream.write(e)},J.prototype.end=function(e){this.stream.end()},J.prototype.destroy=function(e){this.stream.destroy()},J.prototype.destroySoon=function(e){this.stream.destroySoon()}),S.inherits(m,C),m.prototype.write=function(e){if(!this.writable)throw new Error("RingBuffer has been ended already");return this.records.push(e),this.records.length>this.limit&&this.records.shift(),!0},m.prototype.end=function(){arguments.length>0&&this.write.apply(this,Array.prototype.slice.call(arguments)),this.writable=!1},m.prototype.destroy=function(){this.writable=!1,this.emit("close")},m.prototype.destroySoon=function(){this.destroy()},t.exports=h,t.exports.TRACE=N,t.exports.DEBUG=M,t.exports.INFO=P,t.exports.WARN=B,t.exports.ERROR=z,t.exports.FATAL=D,t.exports.resolveLevel=l,t.exports.levelFromName=q,t.exports.nameFromLevel=F,t.exports.VERSION=g,t.exports.LOG_VERSION=v,t.exports.createLogger=function(e){return new h(e)},t.exports.RingBuffer=m,t.exports.RotatingFileStream=J,t.exports.safeCycles=d}).call(this,e("_process"),e("buffer").Buffer)},{_process:28,assert:10,buffer:13,events:16,fs:12,os:27,"safe-json-stringify":43,util:56}],15:[function(e,t,r){(function(e){function t(e){return Array.isArray(e)}function n(e){return"boolean"==typeof e}function i(e){return null===e}function o(e){return null==e}function s(e){return"number"==typeof e}function a(e){return"string"==typeof e}function u(e){return"symbol"==typeof e}function c(e){return void 0===e}function l(e){return h(e)&&"[object RegExp]"===v(e)}function h(e){return"object"==typeof e&&null!==e}function f(e){return h(e)&&"[object Date]"===v(e)}function p(e){return h(e)&&("[object Error]"===v(e)||e instanceof Error)}function d(e){return"function"==typeof e}function m(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function g(t){return e.isBuffer(t)}function v(e){return Object.prototype.toString.call(e)}r.isArray=t,r.isBoolean=n,r.isNull=i,r.isNullOrUndefined=o,r.isNumber=s,r.isString=a,r.isSymbol=u,r.isUndefined=c,r.isRegExp=l,r.isObject=h,r.isDate=f,r.isError=p,r.isFunction=d,r.isPrimitive=m,r.isBuffer=g}).call(this,e("buffer").Buffer)},{buffer:13}],16:[function(e,t,r){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(e){return"function"==typeof e}function o(e){return"number"==typeof e}function s(e){return"object"==typeof e&&null!==e}function a(e){return void 0===e}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!o(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,r,n,o,u,c;if(this._events||(this._events={}),"error"===e&&(!this._events.error||s(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(r=this._events[e],a(r))return!1;if(i(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:for(n=arguments.length,o=new Array(n-1),u=1;n>u;u++)o[u-1]=arguments[u];r.apply(this,o)}else if(s(r)){for(n=arguments.length,o=new Array(n-1),u=1;n>u;u++)o[u-1]=arguments[u];for(c=r.slice(),n=c.length,u=0;n>u;u++)c[u].apply(this,o)}return!0},n.prototype.addListener=function(e,t){var r;if(!i(t))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,i(t.listener)?t.listener:t),this._events[e]?s(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,s(this._events[e])&&!this._events[e].warned){var r;r=a(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,r&&r>0&&this._events[e].length>r&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())}return this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function r(){this.removeListener(e,r),n||(n=!0,t.apply(this,arguments))}if(!i(t))throw TypeError("listener must be a function");var n=!1;return r.listener=t,this.on(e,r),this},n.prototype.removeListener=function(e,t){var r,n,o,a;if(!i(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(r=this._events[e],o=r.length,n=-1,r===t||i(r.listener)&&r.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(s(r)){for(a=o;a-->0;)if(r[a]===t||r[a].listener&&r[a].listener===t){n=a;break}if(0>n)return this;1===r.length?(r.length=0,delete this._events[e]):r.splice(n,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(r=this._events[e],i(r))this.removeListener(e,r);else for(;r.length;)this.removeListener(e,r[r.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?i(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.listenerCount=function(e,t){var r;return r=e._events&&e._events[t]?i(e._events[t])?1:e._events[t].length:0}},{}],17:[function(e,t,r){var n=t.exports,i=(e("events").EventEmitter,e("./lib/request")),o=e("url");n.request=function(e,t){"string"==typeof e&&(e=o.parse(e)),e||(e={}),e.host||e.port||(e.port=parseInt(window.location.port,10)),!e.host&&e.hostname&&(e.host=e.hostname),e.protocol||(e.scheme?e.protocol=e.scheme+":":e.protocol=window.location.protocol),e.host||(e.host=window.location.hostname||window.location.host),/:/.test(e.host)&&(e.port||(e.port=e.host.split(":")[1]),e.host=e.host.split(":")[0]),e.port||(e.port="https:"==e.protocol?443:80);var r=new i(new s,e);return t&&r.on("response",t),r},n.get=function(e,t){e.method="GET";var r=n.request(e,t);return r.end(),r},n.Agent=function(){},n.Agent.defaultMaxSockets=4;var s=function(){if("undefined"==typeof window)throw new Error("no window object present");if(window.XMLHttpRequest)return window.XMLHttpRequest;if(window.ActiveXObject){for(var e=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Microsoft.XMLHTTP"],t=0;t<e.length;t++)try{var r=new window.ActiveXObject(e[t]);return function(){if(r){var n=r;return r=null,n}return new window.ActiveXObject(e[t])}}catch(n){}throw new Error("ajax not supported in this browser")}throw new Error("ajax not supported in this browser")}();n.STATUS_CODES={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",300:"Multiple Choices",301:"Moved Permanently",302:"Moved Temporarily",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Time-out",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Large",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Time-out",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}},{"./lib/request":18,events:16,url:54}],18:[function(e,t,r){var n=e("stream"),i=e("./response"),o=e("Base64"),s=e("inherits"),a=t.exports=function(e,t){var r=this;r.writable=!0,r.xhr=e,r.body=[],r.uri=(t.protocol||"http:")+"//"+t.host+(t.port?":"+t.port:"")+(t.path||"/"),"undefined"==typeof t.withCredentials&&(t.withCredentials=!0);try{e.withCredentials=t.withCredentials}catch(n){}if(t.responseType)try{e.responseType=t.responseType}catch(n){}if(e.open(t.method||"GET",r.uri,!0),e.onerror=function(e){r.emit("error",new Error("Network error"))},r._headers={},t.headers)for(var s=u(t.headers),a=0;a<s.length;a++){var c=s[a];if(r.isSafeRequestHeader(c)){var l=t.headers[c];r.setHeader(c,l)}}t.auth&&this.setHeader("Authorization","Basic "+o.btoa(t.auth));var h=new i;h.on("close",function(){r.emit("close")}),h.on("ready",function(){r.emit("response",h)}),h.on("error",function(e){r.emit("error",e)}),e.onreadystatechange=function(){e.__aborted||h.handle(e)}};s(a,n),a.prototype.setHeader=function(e,t){this._headers[e.toLowerCase()]=t},a.prototype.getHeader=function(e){return this._headers[e.toLowerCase()]},a.prototype.removeHeader=function(e){delete this._headers[e.toLowerCase()]},a.prototype.write=function(e){this.body.push(e)},a.prototype.destroy=function(e){this.xhr.__aborted=!0,this.xhr.abort(),this.emit("close")},a.prototype.end=function(e){void 0!==e&&this.body.push(e);for(var t=u(this._headers),r=0;r<t.length;r++){var n=t[r],i=this._headers[n];if(c(i))for(var o=0;o<i.length;o++)this.xhr.setRequestHeader(n,i[o]);else this.xhr.setRequestHeader(n,i)}if(0===this.body.length)this.xhr.send("");else if("string"==typeof this.body[0])this.xhr.send(this.body.join(""));else if(c(this.body[0])){for(var s=[],r=0;r<this.body.length;r++)s.push.apply(s,this.body[r]);this.xhr.send(s)}else if(/Array/.test(Object.prototype.toString.call(this.body[0]))){for(var a=0,r=0;r<this.body.length;r++)a+=this.body[r].length;for(var s=new this.body[0].constructor(a),l=0,r=0;r<this.body.length;r++)for(var f=this.body[r],o=0;o<f.length;o++)s[l++]=f[o];this.xhr.send(s)}else if(h(this.body[0]))this.xhr.send(this.body[0]);else{for(var s="",r=0;r<this.body.length;r++)s+=this.body[r].toString();this.xhr.send(s)}},a.unsafeHeaders=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","content-transfer-encoding","date","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","user-agent","via"],a.prototype.isSafeRequestHeader=function(e){return e?-1===l(a.unsafeHeaders,e.toLowerCase()):!1};var u=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t},c=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},l=function(e,t){if(e.indexOf)return e.indexOf(t);for(var r=0;r<e.length;r++)if(e[r]===t)return r;return-1},h=function(e){return"undefined"!=typeof Blob&&e instanceof Blob?!0:"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?!0:"undefined"!=typeof FormData&&e instanceof FormData?!0:void 0}},{"./response":19,Base64:9,inherits:21,stream:44}],19:[function(e,t,r){function n(e){for(var t=e.getAllResponseHeaders().split(/\r?\n/),r={},n=0;n<t.length;n++){var i=t[n];if(""!==i){var o=i.match(/^([^:]+):\s*(.*)/);if(o){var s=o[1].toLowerCase(),a=o[2];void 0!==r[s]?u(r[s])?r[s].push(a):r[s]=[r[s],a]:r[s]=a}else r[i]=!0}}return r}var i=e("stream"),o=e("util"),s=t.exports=function(e){this.offset=0,this.readable=!0};o.inherits(s,i);var a={streaming:!0,status2:!0};s.prototype.getResponse=function(e){var t=String(e.responseType).toLowerCase();return"blob"===t?e.responseBlob||e.response:"arraybuffer"===t?e.response:e.responseText},s.prototype.getHeader=function(e){return this.headers[e.toLowerCase()]},s.prototype.handle=function(e){if(2===e.readyState&&a.status2){try{this.statusCode=e.status,this.headers=n(e)}catch(t){a.status2=!1}a.status2&&this.emit("ready")}else if(a.streaming&&3===e.readyState){try{this.statusCode||(this.statusCode=e.status,this.headers=n(e),this.emit("ready"))}catch(t){}try{this._emitData(e)}catch(t){a.streaming=!1}}else 4===e.readyState&&(this.statusCode||(this.statusCode=e.status,this.emit("ready")),this._emitData(e),e.error?this.emit("error",this.getResponse(e)):this.emit("end"),this.emit("close"))},s.prototype._emitData=function(e){var t=this.getResponse(e);return t.toString().match(/ArrayBuffer/)?(this.emit("data",new Uint8Array(t,this.offset)),void(this.offset=t.byteLength)):void(t.length>this.offset&&(this.emit("data",t.slice(this.offset)),this.offset=t.length))};var u=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},{stream:44,util:56}],20:[function(e,t,r){r.read=function(e,t,r,n,i){var o,s,a=8*i-n-1,u=(1<<a)-1,c=u>>1,l=-7,h=r?i-1:0,f=r?-1:1,p=e[t+h];for(h+=f,o=p&(1<<-l)-1,p>>=-l,l+=a;l>0;o=256*o+e[t+h],h+=f,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=n;l>0;s=256*s+e[t+h],h+=f,l-=8);if(0===o)o=1-c;else{if(o===u)return s?NaN:(p?-1:1)*(1/0);s+=Math.pow(2,n),o-=c}return(p?-1:1)*s*Math.pow(2,o-n)},r.write=function(e,t,r,n,i,o){var s,a,u,c=8*o-i-1,l=(1<<c)-1,h=l>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,d=n?1:-1,m=0>t||0===t&&0>1/t?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=l):(s=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-s))<1&&(s--,u*=2),t+=s+h>=1?f/u:f*Math.pow(2,1-h),t*u>=2&&(s++,u/=2),s+h>=l?(a=0,s=l):s+h>=1?(a=(t*u-1)*Math.pow(2,i),s+=h):(a=t*Math.pow(2,h-1)*Math.pow(2,i),s=0));i>=8;e[r+p]=255&a,p+=d,a/=256,i-=8);for(s=s<<i|a,c+=i;c>0;e[r+p]=255&s,p+=d,s/=256,c-=8);e[r+p-d]|=128*m}},{}],21:[function(e,t,r){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},{}],22:[function(e,t,r){var n=e("through2"),i=e("irc-prefix-parser"),o=e("iso8601-convert"),s=function(e){var t={raw:e,tags:{},prefix:null,command:null,params:[]},r=0,n=0;if(64===e.charCodeAt(0)){var n=e.indexOf(" ");if(-1===n)return null;for(var i=e.slice(1,n).split(";"),o=0;o<i.length;o++){var s=i[o],a=s.split("=");t.tags[a[0]]=a[1]||!0}r=n+1}for(;32===e.charCodeAt(r);)r++;if(58===e.charCodeAt(r)){if(n=e.indexOf(" ",r),-1===n)return null;for(t.prefix=e.slice(r+1,n),r=n+1;32===e.charCodeAt(r);)r++}if(n=e.indexOf(" ",r),-1===n)return e.length>r?(t.command=e.slice(r),t):null;for(t.command=e.slice(r,n),r=n+1;32===e.charCodeAt(r);)r++;for(;r<e.length;){if(n=e.indexOf(" ",r),58===e.charCodeAt(r)){t.params.push(e.slice(r+1));break}if(-1===n){if(-1===n){t.params.push(e.slice(r));break}}else for(t.params.push(e.slice(r,n)),r=n+1;32===e.charCodeAt(r);)r++}return t},a=function(e){var e=e||{},t=e.convertTimestamps||!1,r=e.parsePrefix||!1,a="",u=n.obj(function(e,n,u){a+=e.toString(),messages=a.split(/\r\n/),a=messages.pop();for(var c=0;c<messages.length;c++){var l=messages[c],h=s(l);if(null!==h){var f=h.tags.time;if(f&&t){var p=o.toDate(f);h.tags.time=p?p:new Date(NaN)}r&&(h.prefix=i(h.prefix)),this.push(h)}else this.emit("error",new Error("Invalid IRC message"))}u()});return u};t.exports={parse:s,createStream:a}},{"irc-prefix-parser":23,"iso8601-convert":26,through2:46}],23:[function(e,t,r){t.exports=function(e){if(!e||0===e.length)return null;var t=e.indexOf(".")+1,r=e.indexOf("!")+1,n=e.indexOf("@",r)+1;if(1===r||1===n)return null;var i={};return i.raw=e,i.isServer=!1,i.nick=null,i.user=null,i.host=null,r>0?(i.nick=e.slice(0,r-1),n>0?(i.user=e.slice(r,n-1),i.host=e.slice(n)):i.user=e.slice(r)):n>0?(i.nick=e.slice(0,n-1),i.host=e.slice(n)):t>0?(i.host=e,i.isServer=!0):i.nick=e,i}},{}],24:[function(e,t,r){var n=Array.isArray,i=Object.prototype.toString;t.exports=n||function(e){return!!e&&"[object Array]"==i.call(e)}},{}],25:[function(e,t,r){t.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},{}],26:[function(e,t,r){function n(e,t){for(var r=""+e;r.length<t;)r="0"+r;return r}function i(e){var t="([0-9]{4})(-([0-9]{2})(-([0-9]{2})(T([0-9]{2}):([0-9]{2})(:([0-9]{2})(\\.([0-9]+))?)?(Z|(([-+])([0-9]{2}):([0-9]{2})))?)?)?)?",r=e.match(new RegExp(t));if(null===r)return null;var n=0,i=new Date(r[1],0,1);r[3]&&i.setMonth(r[3]-1),r[5]&&i.setDate(r[5]),r[7]&&i.setHours(r[7]),r[8]&&i.setMinutes(r[8]),r[10]&&i.setSeconds(r[10]),r[12]&&i.setMilliseconds(1e3*("0."+r[12])),r[14]&&(n=60*r[16]+parseInt(r[17],10),n*="-"===r[15]?1:-1),n-=i.getTimezoneOffset();var o=i.getTime()+60*n*1e3;return new Date(o)}var o=function(e){var t=e.getUTCFullYear(),r=n(e.getUTCMonth()+1,2),i=n(e.getUTCDate(),2),o=n(e.getUTCHours(),2),s=n(e.getUTCMinutes(),2),a=n(e.getUTCSeconds(),2);return t+"-"+r+"-"+i+"T"+o+":"+s+":"+a+"Z"};r.toDate=i,r.fromDate=o},{}],27:[function(e,t,r){r.endianness=function(){return"LE"},r.hostname=function(){return"undefined"!=typeof location?location.hostname:""},r.loadavg=function(){return[]},r.uptime=function(){return 0},r.freemem=function(){return Number.MAX_VALUE},r.totalmem=function(){return Number.MAX_VALUE},r.cpus=function(){return[]},r.type=function(){return"Browser"},r.release=function(){return"undefined"!=typeof navigator?navigator.appVersion:""},r.networkInterfaces=r.getNetworkInterfaces=function(){return{}},r.arch=function(){return"javascript"},r.platform=function(){return"browser"},r.tmpdir=r.tmpDir=function(){return"/tmp"},r.EOL="\n"},{}],28:[function(e,t,r){function n(){l=!1,a.length?c=a.concat(c):h=-1,c.length&&i()}function i(){if(!l){var e=setTimeout(n);l=!0;for(var t=c.length;t;){for(a=c,c=[];++h<t;)a&&a[h].run();h=-1,t=c.length}a=null,l=!1,clearTimeout(e)}}function o(e,t){this.fun=e,this.array=t}function s(){}var a,u=t.exports={},c=[],l=!1,h=-1;u.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];c.push(new o(e,t)),1!==c.length||l||setTimeout(i,0)},o.prototype.run=function(){this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={},u.argv=[],u.version="",u.versions={},u.on=s,u.addListener=s,u.once=s,u.off=s,u.removeListener=s,u.removeAllListeners=s,u.emit=s,u.binding=function(e){throw new Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(e){throw new Error("process.chdir is not supported")},u.umask=function(){return 0}},{}],29:[function(e,t,r){(function(e){!function(n){function i(e){throw RangeError(I[e])}function o(e,t){for(var r=e.length,n=[];r--;)n[r]=t(e[r]);return n}function s(e,t){var r=e.split("@"),n="";r.length>1&&(n=r[0]+"@",e=r[1]),e=e.replace(L,".");var i=e.split("."),s=o(i,t).join(".");return n+s}function a(e){for(var t,r,n=[],i=0,o=e.length;o>i;)t=e.charCodeAt(i++),t>=55296&&56319>=t&&o>i?(r=e.charCodeAt(i++),56320==(64512&r)?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),i--)):n.push(t);return n}function u(e){return o(e,function(e){var t="";return e>65535&&(e-=65536,t+=M(e>>>10&1023|55296),e=56320|1023&e),t+=M(e)}).join("")}function c(e){return 10>e-48?e-22:26>e-65?e-65:26>e-97?e-97:E}function l(e,t){return e+22+75*(26>e)-((0!=t)<<5)}function h(e,t,r){var n=0;for(e=r?N(e/A):e>>1,e+=N(e/t);e>U*x>>1;n+=E)e=N(e/U);return N(n+(U+1)*e/(e+C))}function f(e){var t,r,n,o,s,a,l,f,p,d,m=[],g=e.length,v=0,y=O,w=T;for(r=e.lastIndexOf(k),0>r&&(r=0),n=0;r>n;++n)e.charCodeAt(n)>=128&&i("not-basic"),m.push(e.charCodeAt(n));for(o=r>0?r+1:0;g>o;){for(s=v,a=1,l=E;o>=g&&i("invalid-input"),f=c(e.charCodeAt(o++)),(f>=E||f>N((_-v)/a))&&i("overflow"),v+=f*a,p=w>=l?S:l>=w+x?x:l-w,!(p>f);l+=E)d=E-p,a>N(_/d)&&i("overflow"),a*=d;t=m.length+1,w=h(v-s,t,0==s),N(v/t)>_-y&&i("overflow"),y+=N(v/t),v%=t,m.splice(v++,0,y)}return u(m)}function p(e){var t,r,n,o,s,u,c,f,p,d,m,g,v,y,w,b=[];for(e=a(e),g=e.length,t=O,r=0,s=T,u=0;g>u;++u)m=e[u],128>m&&b.push(M(m));for(n=o=b.length,o&&b.push(k);g>n;){for(c=_,u=0;g>u;++u)m=e[u],m>=t&&c>m&&(c=m);for(v=n+1,c-t>N((_-r)/v)&&i("overflow"),r+=(c-t)*v,t=c,u=0;g>u;++u)if(m=e[u],t>m&&++r>_&&i("overflow"),m==t){for(f=r,p=E;d=s>=p?S:p>=s+x?x:p-s,!(d>f);p+=E)w=f-d,y=E-d,b.push(M(l(d+w%y,0))),f=N(w/y);b.push(M(l(f,0))),s=h(r,v,n==o),r=0,++n}++r,++t}return b.join("")}function d(e){return s(e,function(e){return R.test(e)?f(e.slice(4).toLowerCase()):e})}function m(e){return s(e,function(e){return j.test(e)?"xn--"+p(e):e})}var g="object"==typeof r&&r&&!r.nodeType&&r,v="object"==typeof t&&t&&!t.nodeType&&t,y="object"==typeof e&&e;(y.global===y||y.window===y||y.self===y)&&(n=y);var w,b,_=2147483647,E=36,S=1,x=26,C=38,A=700,T=72,O=128,k="-",R=/^xn--/,j=/[^\x20-\x7E]/,L=/[\x2E\u3002\uFF0E\uFF61]/g,I={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},U=E-S,N=Math.floor,M=String.fromCharCode;if(w={version:"1.3.2",ucs2:{decode:a,encode:u},decode:f,encode:p,toASCII:m,toUnicode:d},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define("punycode",function(){return w});else if(g&&v)if(t.exports==g)v.exports=w;else for(b in w)w.hasOwnProperty(b)&&(g[b]=w[b]);else n.punycode=w}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],30:[function(e,t,r){"use strict";function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.exports=function(e,t,r,o){t=t||"&",r=r||"=";var s={};if("string"!=typeof e||0===e.length)return s;var a=/\+/g;e=e.split(t);var u=1e3;o&&"number"==typeof o.maxKeys&&(u=o.maxKeys);var c=e.length;u>0&&c>u&&(c=u);for(var l=0;c>l;++l){var h,f,p,d,m=e[l].replace(a,"%20"),g=m.indexOf(r);g>=0?(h=m.substr(0,g),f=m.substr(g+1)):(h=m,f=""),p=decodeURIComponent(h),d=decodeURIComponent(f),n(s,p)?i(s[p])?s[p].push(d):s[p]=[s[p],d]:s[p]=d}return s};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},{}],31:[function(e,t,r){"use strict";function n(e,t){if(e.map)return e.map(t);for(var r=[],n=0;n<e.length;n++)r.push(t(e[n],n));return r}var i=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};t.exports=function(e,t,r,a){return t=t||"&",r=r||"=",null===e&&(e=void 0),"object"==typeof e?n(s(e),function(s){var a=encodeURIComponent(i(s))+r;return o(e[s])?n(e[s],function(e){return a+encodeURIComponent(i(e))}).join(t):a+encodeURIComponent(i(e[s]))}).join(t):a?encodeURIComponent(i(a))+r+encodeURIComponent(i(e)):""};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},s=Object.keys||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t}},{}],32:[function(e,t,r){"use strict";r.decode=r.parse=e("./decode"),r.encode=r.stringify=e("./encode")},{"./decode":30,"./encode":31}],33:[function(e,t,r){t.exports=e("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":34}],34:[function(e,t,r){(function(r){function n(e){return this instanceof n?(u.call(this,e),c.call(this,e),e&&e.readable===!1&&(this.readable=!1),e&&e.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,e&&e.allowHalfOpen===!1&&(this.allowHalfOpen=!1),void this.once("end",i)):new n(e)}function i(){this.allowHalfOpen||this._writableState.ended||r.nextTick(this.end.bind(this))}function o(e,t){for(var r=0,n=e.length;n>r;r++)t(e[r],r)}t.exports=n;var s=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t},a=e("core-util-is");a.inherits=e("inherits");var u=e("./_stream_readable"),c=e("./_stream_writable");a.inherits(n,u),o(s(c.prototype),function(e){n.prototype[e]||(n.prototype[e]=c.prototype[e])})}).call(this,e("_process"))},{"./_stream_readable":36,"./_stream_writable":38,_process:28,"core-util-is":15,inherits:21}],35:[function(e,t,r){function n(e){return this instanceof n?void i.call(this,e):new n(e)}t.exports=n;var i=e("./_stream_transform"),o=e("core-util-is");o.inherits=e("inherits"),o.inherits(n,i),n.prototype._transform=function(e,t,r){r(null,e)}},{"./_stream_transform":37,"core-util-is":15,inherits:21}],36:[function(e,t,r){(function(r){function n(t,r){t=t||{};var n=t.highWaterMark;this.highWaterMark=n||0===n?n:16384,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=!1,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.calledRead=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!t.objectMode,this.defaultEncoding=t.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(O||(O=e("string_decoder/").StringDecoder),this.decoder=new O(t.encoding),this.encoding=t.encoding)}function i(e){return this instanceof i?(this._readableState=new n(e,this),this.readable=!0,void A.call(this)):new i(e)}function o(e,t,r,n,i){var o=c(t,r);if(o)e.emit("error",o);else if(null===r||void 0===r)t.reading=!1,t.ended||l(e,t);else if(t.objectMode||r&&r.length>0)if(t.ended&&!i){var a=new Error("stream.push() after EOF");e.emit("error",a)}else if(t.endEmitted&&i){var a=new Error("stream.unshift() after end event");e.emit("error",a)}else!t.decoder||i||n||(r=t.decoder.write(r)),t.length+=t.objectMode?1:r.length,i?t.buffer.unshift(r):(t.reading=!1,t.buffer.push(r)),t.needReadable&&h(e),p(e,t);else i||(t.reading=!1);return s(t)}function s(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}function a(e){if(e>=k)e=k;else{e--;for(var t=1;32>t;t<<=1)e|=e>>t;e++}return e}function u(e,t){return 0===t.length&&t.ended?0:t.objectMode?0===e?0:1:null===e||isNaN(e)?t.flowing&&t.buffer.length?t.buffer[0].length:t.length:0>=e?0:(e>t.highWaterMark&&(t.highWaterMark=a(e)),e>t.length?t.ended?t.length:(t.needReadable=!0,0):e)}function c(e,t){var r=null;return x.isBuffer(t)||"string"==typeof t||null===t||void 0===t||e.objectMode||(r=new TypeError("Invalid non-string/buffer chunk")),r}function l(e,t){if(t.decoder&&!t.ended){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,t.length>0?h(e):b(e)}function h(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,t.sync?r.nextTick(function(){f(e)}):f(e))}function f(e){e.emit("readable")}function p(e,t){t.readingMore||(t.readingMore=!0,r.nextTick(function(){d(e,t)}))}function d(e,t){for(var r=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(e.read(0),r!==t.length);)r=t.length;t.readingMore=!1}function m(e){return function(){var t=e._readableState;t.awaitDrain--,0===t.awaitDrain&&g(e)}}function g(e){function t(e,t,i){var o=e.write(r);!1===o&&n.awaitDrain++}var r,n=e._readableState;for(n.awaitDrain=0;n.pipesCount&&null!==(r=e.read());)if(1===n.pipesCount?t(n.pipes,0,null):_(n.pipes,t),e.emit("data",r),n.awaitDrain>0)return;return 0===n.pipesCount?(n.flowing=!1,void(C.listenerCount(e,"data")>0&&y(e))):void(n.ranOut=!0)}function v(){this._readableState.ranOut&&(this._readableState.ranOut=!1,g(this))}function y(e,t){var n=e._readableState;if(n.flowing)throw new Error("Cannot switch to old mode now.");var i=t||!1,o=!1;e.readable=!0,e.pipe=A.prototype.pipe,e.on=e.addListener=A.prototype.on,e.on("readable",function(){o=!0;for(var t;!i&&null!==(t=e.read());)e.emit("data",t);null===t&&(o=!1,e._readableState.needReadable=!0)}),e.pause=function(){i=!0,this.emit("pause")},e.resume=function(){i=!1,o?r.nextTick(function(){e.emit("readable")}):this.read(0),this.emit("resume")},e.emit("readable")}function w(e,t){var r,n=t.buffer,i=t.length,o=!!t.decoder,s=!!t.objectMode;if(0===n.length)return null;if(0===i)r=null;else if(s)r=n.shift();else if(!e||e>=i)r=o?n.join(""):x.concat(n,i),n.length=0;else if(e<n[0].length){var a=n[0];r=a.slice(0,e),n[0]=a.slice(e)}else if(e===n[0].length)r=n.shift();else{r=o?"":new x(e);for(var u=0,c=0,l=n.length;l>c&&e>u;c++){var a=n[0],h=Math.min(e-u,a.length);o?r+=a.slice(0,h):a.copy(r,u,0,h),h<a.length?n[0]=a.slice(h):n.shift(),u+=h}}return r}function b(e){var t=e._readableState;if(t.length>0)throw new Error("endReadable called on non-empty stream");!t.endEmitted&&t.calledRead&&(t.ended=!0,r.nextTick(function(){t.endEmitted||0!==t.length||(t.endEmitted=!0,
e.readable=!1,e.emit("end"))}))}function _(e,t){for(var r=0,n=e.length;n>r;r++)t(e[r],r)}function E(e,t){for(var r=0,n=e.length;n>r;r++)if(e[r]===t)return r;return-1}t.exports=i;var S=e("isarray"),x=e("buffer").Buffer;i.ReadableState=n;var C=e("events").EventEmitter;C.listenerCount||(C.listenerCount=function(e,t){return e.listeners(t).length});var A=e("stream"),T=e("core-util-is");T.inherits=e("inherits");var O;T.inherits(i,A),i.prototype.push=function(e,t){var r=this._readableState;return"string"!=typeof e||r.objectMode||(t=t||r.defaultEncoding,t!==r.encoding&&(e=new x(e,t),t="")),o(this,r,e,t,!1)},i.prototype.unshift=function(e){var t=this._readableState;return o(this,t,e,"",!0)},i.prototype.setEncoding=function(t){O||(O=e("string_decoder/").StringDecoder),this._readableState.decoder=new O(t),this._readableState.encoding=t};var k=8388608;i.prototype.read=function(e){var t=this._readableState;t.calledRead=!0;var r,n=e;if(("number"!=typeof e||e>0)&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return h(this),null;if(e=u(e,t),0===e&&t.ended)return r=null,t.length>0&&t.decoder&&(r=w(e,t),t.length-=r.length),0===t.length&&b(this),r;var i=t.needReadable;return t.length-e<=t.highWaterMark&&(i=!0),(t.ended||t.reading)&&(i=!1),i&&(t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1),i&&!t.reading&&(e=u(n,t)),r=e>0?w(e,t):null,null===r&&(t.needReadable=!0,e=0),t.length-=e,0!==t.length||t.ended||(t.needReadable=!0),t.ended&&!t.endEmitted&&0===t.length&&b(this),r},i.prototype._read=function(e){this.emit("error",new Error("not implemented"))},i.prototype.pipe=function(e,t){function n(e){e===l&&o()}function i(){e.end()}function o(){e.removeListener("close",a),e.removeListener("finish",u),e.removeListener("drain",d),e.removeListener("error",s),e.removeListener("unpipe",n),l.removeListener("end",i),l.removeListener("end",o),(!e._writableState||e._writableState.needDrain)&&d()}function s(t){c(),e.removeListener("error",s),0===C.listenerCount(e,"error")&&e.emit("error",t)}function a(){e.removeListener("finish",u),c()}function u(){e.removeListener("close",a),c()}function c(){l.unpipe(e)}var l=this,h=this._readableState;switch(h.pipesCount){case 0:h.pipes=e;break;case 1:h.pipes=[h.pipes,e];break;default:h.pipes.push(e)}h.pipesCount+=1;var f=(!t||t.end!==!1)&&e!==r.stdout&&e!==r.stderr,p=f?i:o;h.endEmitted?r.nextTick(p):l.once("end",p),e.on("unpipe",n);var d=m(l);return e.on("drain",d),e._events&&e._events.error?S(e._events.error)?e._events.error.unshift(s):e._events.error=[s,e._events.error]:e.on("error",s),e.once("close",a),e.once("finish",u),e.emit("pipe",l),h.flowing||(this.on("readable",v),h.flowing=!0,r.nextTick(function(){g(l)})),e},i.prototype.unpipe=function(e){var t=this._readableState;if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,this.removeListener("readable",v),t.flowing=!1,e&&e.emit("unpipe",this),this);if(!e){var r=t.pipes,n=t.pipesCount;t.pipes=null,t.pipesCount=0,this.removeListener("readable",v),t.flowing=!1;for(var i=0;n>i;i++)r[i].emit("unpipe",this);return this}var i=E(t.pipes,e);return-1===i?this:(t.pipes.splice(i,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this),this)},i.prototype.on=function(e,t){var r=A.prototype.on.call(this,e,t);if("data"!==e||this._readableState.flowing||y(this),"readable"===e&&this.readable){var n=this._readableState;n.readableListening||(n.readableListening=!0,n.emittedReadable=!1,n.needReadable=!0,n.reading?n.length&&h(this,n):this.read(0))}return r},i.prototype.addListener=i.prototype.on,i.prototype.resume=function(){y(this),this.read(0),this.emit("resume")},i.prototype.pause=function(){y(this,!0),this.emit("pause")},i.prototype.wrap=function(e){var t=this._readableState,r=!1,n=this;e.on("end",function(){if(t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&n.push(e)}n.push(null)}),e.on("data",function(i){if(t.decoder&&(i=t.decoder.write(i)),(!t.objectMode||null!==i&&void 0!==i)&&(t.objectMode||i&&i.length)){var o=n.push(i);o||(r=!0,e.pause())}});for(var i in e)"function"==typeof e[i]&&"undefined"==typeof this[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));var o=["error","close","destroy","pause","resume"];return _(o,function(t){e.on(t,n.emit.bind(n,t))}),n._read=function(t){r&&(r=!1,e.resume())},n},i._fromList=w}).call(this,e("_process"))},{_process:28,buffer:13,"core-util-is":15,events:16,inherits:21,isarray:25,stream:44,"string_decoder/":45}],37:[function(e,t,r){function n(e,t){this.afterTransform=function(e,r){return i(t,e,r)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function i(e,t,r){var n=e._transformState;n.transforming=!1;var i=n.writecb;if(!i)return e.emit("error",new Error("no writecb in Transform class"));n.writechunk=null,n.writecb=null,null!==r&&void 0!==r&&e.push(r),i&&i(t);var o=e._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&e._read(o.highWaterMark)}function o(e){if(!(this instanceof o))return new o(e);a.call(this,e);var t=(this._transformState=new n(e,this),this);this._readableState.needReadable=!0,this._readableState.sync=!1,this.once("finish",function(){"function"==typeof this._flush?this._flush(function(e){s(t,e)}):s(t)})}function s(e,t){if(t)return e.emit("error",t);var r=e._writableState,n=(e._readableState,e._transformState);if(r.length)throw new Error("calling transform done when ws.length != 0");if(n.transforming)throw new Error("calling transform done when still transforming");return e.push(null)}t.exports=o;var a=e("./_stream_duplex"),u=e("core-util-is");u.inherits=e("inherits"),u.inherits(o,a),o.prototype.push=function(e,t){return this._transformState.needTransform=!1,a.prototype.push.call(this,e,t)},o.prototype._transform=function(e,t,r){throw new Error("not implemented")},o.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},o.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0}},{"./_stream_duplex":34,"core-util-is":15,inherits:21}],38:[function(e,t,r){(function(r){function n(e,t,r){this.chunk=e,this.encoding=t,this.callback=r}function i(e,t){e=e||{};var r=e.highWaterMark;this.highWaterMark=r||0===r?r:16384,this.objectMode=!!e.objectMode,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var n=e.decodeStrings===!1;this.decodeStrings=!n,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){p(t,e)},this.writecb=null,this.writelen=0,this.buffer=[],this.errorEmitted=!1}function o(t){var r=e("./_stream_duplex");return this instanceof o||this instanceof r?(this._writableState=new i(t,this),this.writable=!0,void E.call(this)):new o(t)}function s(e,t,n){var i=new Error("write after end");e.emit("error",i),r.nextTick(function(){n(i)})}function a(e,t,n,i){var o=!0;if(!b.isBuffer(n)&&"string"!=typeof n&&null!==n&&void 0!==n&&!t.objectMode){var s=new TypeError("Invalid non-string/buffer chunk");e.emit("error",s),r.nextTick(function(){i(s)}),o=!1}return o}function u(e,t,r){return e.objectMode||e.decodeStrings===!1||"string"!=typeof t||(t=new b(t,r)),t}function c(e,t,r,i,o){r=u(t,r,i),b.isBuffer(r)&&(i="buffer");var s=t.objectMode?1:r.length;t.length+=s;var a=t.length<t.highWaterMark;return a||(t.needDrain=!0),t.writing?t.buffer.push(new n(r,i,o)):l(e,t,s,r,i,o),a}function l(e,t,r,n,i,o){t.writelen=r,t.writecb=o,t.writing=!0,t.sync=!0,e._write(n,i,t.onwrite),t.sync=!1}function h(e,t,n,i,o){n?r.nextTick(function(){o(i)}):o(i),e._writableState.errorEmitted=!0,e.emit("error",i)}function f(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function p(e,t){var n=e._writableState,i=n.sync,o=n.writecb;if(f(n),t)h(e,n,i,t,o);else{var s=v(e,n);s||n.bufferProcessing||!n.buffer.length||g(e,n),i?r.nextTick(function(){d(e,n,s,o)}):d(e,n,s,o)}}function d(e,t,r,n){r||m(e,t),n(),r&&y(e,t)}function m(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function g(e,t){t.bufferProcessing=!0;for(var r=0;r<t.buffer.length;r++){var n=t.buffer[r],i=n.chunk,o=n.encoding,s=n.callback,a=t.objectMode?1:i.length;if(l(e,t,a,i,o,s),t.writing){r++;break}}t.bufferProcessing=!1,r<t.buffer.length?t.buffer=t.buffer.slice(r):t.buffer.length=0}function v(e,t){return t.ending&&0===t.length&&!t.finished&&!t.writing}function y(e,t){var r=v(e,t);return r&&(t.finished=!0,e.emit("finish")),r}function w(e,t,n){t.ending=!0,y(e,t),n&&(t.finished?r.nextTick(n):e.once("finish",n)),t.ended=!0}t.exports=o;var b=e("buffer").Buffer;o.WritableState=i;var _=e("core-util-is");_.inherits=e("inherits");var E=e("stream");_.inherits(o,E),o.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},o.prototype.write=function(e,t,r){var n=this._writableState,i=!1;return"function"==typeof t&&(r=t,t=null),b.isBuffer(e)?t="buffer":t||(t=n.defaultEncoding),"function"!=typeof r&&(r=function(){}),n.ended?s(this,n,r):a(this,n,e,r)&&(i=c(this,n,e,t,r)),i},o.prototype._write=function(e,t,r){r(new Error("not implemented"))},o.prototype.end=function(e,t,r){var n=this._writableState;"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),"undefined"!=typeof e&&null!==e&&this.write(e,t),n.ending||n.finished||w(this,n,r)}}).call(this,e("_process"))},{"./_stream_duplex":34,_process:28,buffer:13,"core-util-is":15,inherits:21,stream:44}],39:[function(e,t,r){t.exports=e("./lib/_stream_passthrough.js")},{"./lib/_stream_passthrough.js":35}],40:[function(e,t,r){var n=e("stream");r=t.exports=e("./lib/_stream_readable.js"),r.Stream=n,r.Readable=r,r.Writable=e("./lib/_stream_writable.js"),r.Duplex=e("./lib/_stream_duplex.js"),r.Transform=e("./lib/_stream_transform.js"),r.PassThrough=e("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":34,"./lib/_stream_passthrough.js":35,"./lib/_stream_readable.js":36,"./lib/_stream_transform.js":37,"./lib/_stream_writable.js":38,stream:44}],41:[function(e,t,r){t.exports=e("./lib/_stream_transform.js")},{"./lib/_stream_transform.js":37}],42:[function(e,t,r){t.exports=e("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":38}],43:[function(e,t,r){function n(e){return"[Throws: "+(e?e.message:"?")+"]"}function i(e,t){if(s.call(e,t))try{return e[t]}catch(r){return n(r)}return e[t]}function o(e){function t(e){if(null===e||"object"!=typeof e)return e;if(-1!==r.indexOf(e))return"[Circular]";if(r.push(e),"function"==typeof e.toJSON)try{return t(e.toJSON())}catch(o){return n(o)}return Array.isArray(e)?e.map(t):Object.keys(e).reduce(function(r,n){return r[n]=t(i(e,n)),r},{})}var r=[];return t(e)}var s=Object.prototype.hasOwnProperty;t.exports=function(e){return JSON.stringify(o(e))},t.exports.ensureProperties=o},{}],44:[function(e,t,r){function n(){i.call(this)}t.exports=n;var i=e("events").EventEmitter,o=e("inherits");o(n,i),n.Readable=e("readable-stream/readable.js"),n.Writable=e("readable-stream/writable.js"),n.Duplex=e("readable-stream/duplex.js"),n.Transform=e("readable-stream/transform.js"),n.PassThrough=e("readable-stream/passthrough.js"),n.Stream=n,n.prototype.pipe=function(e,t){function r(t){e.writable&&!1===e.write(t)&&c.pause&&c.pause()}function n(){c.readable&&c.resume&&c.resume()}function o(){l||(l=!0,e.end())}function s(){l||(l=!0,"function"==typeof e.destroy&&e.destroy())}function a(e){if(u(),0===i.listenerCount(this,"error"))throw e}function u(){c.removeListener("data",r),e.removeListener("drain",n),c.removeListener("end",o),c.removeListener("close",s),c.removeListener("error",a),e.removeListener("error",a),c.removeListener("end",u),c.removeListener("close",u),e.removeListener("close",u)}var c=this;c.on("data",r),e.on("drain",n),e._isStdio||t&&t.end===!1||(c.on("end",o),c.on("close",s));var l=!1;return c.on("error",a),e.on("error",a),c.on("end",u),c.on("close",u),e.on("close",u),e.emit("pipe",c),e}},{events:16,inherits:21,"readable-stream/duplex.js":33,"readable-stream/passthrough.js":39,"readable-stream/readable.js":40,"readable-stream/transform.js":41,"readable-stream/writable.js":42}],45:[function(e,t,r){function n(e){if(e&&!u(e))throw new Error("Unknown encoding: "+e)}function i(e){return e.toString(this.encoding)}function o(e){this.charReceived=e.length%2,this.charLength=this.charReceived?2:0}function s(e){this.charReceived=e.length%3,this.charLength=this.charReceived?3:0}var a=e("buffer").Buffer,u=a.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},c=r.StringDecoder=function(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),n(e),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=o;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=s;break;default:return void(this.write=i)}this.charBuffer=new a(6),this.charReceived=0,this.charLength=0};c.prototype.write=function(e){for(var t="";this.charLength;){var r=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;if(e.copy(this.charBuffer,this.charReceived,0,r),this.charReceived+=r,this.charReceived<this.charLength)return"";e=e.slice(r,e.length),t=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var n=t.charCodeAt(t.length-1);if(!(n>=55296&&56319>=n)){if(this.charReceived=this.charLength=0,0===e.length)return t;break}this.charLength+=this.surrogateSize,t=""}this.detectIncompleteChar(e);var i=e.length;this.charLength&&(e.copy(this.charBuffer,0,e.length-this.charReceived,i),i-=this.charReceived),t+=e.toString(this.encoding,0,i);var i=t.length-1,n=t.charCodeAt(i);if(n>=55296&&56319>=n){var o=this.surrogateSize;return this.charLength+=o,this.charReceived+=o,this.charBuffer.copy(this.charBuffer,o,0,o),e.copy(this.charBuffer,0,0,o),t.substring(0,i)}return t},c.prototype.detectIncompleteChar=function(e){for(var t=e.length>=3?3:e.length;t>0;t--){var r=e[e.length-t];if(1==t&&r>>5==6){this.charLength=2;break}if(2>=t&&r>>4==14){this.charLength=3;break}if(3>=t&&r>>3==30){this.charLength=4;break}}this.charReceived=t},c.prototype.end=function(e){var t="";if(e&&e.length&&(t=this.write(e)),this.charReceived){var r=this.charReceived,n=this.charBuffer,i=this.encoding;t+=n.slice(0,r).toString(i)}return t}},{buffer:13}],46:[function(e,t,r){(function(r){function n(e){s.call(this,e),this._destroyed=!1}function i(e,t,r){r(null,e)}function o(e){return function(t,r,n){return"function"==typeof t&&(n=r,r=t,t={}),"function"!=typeof r&&(r=i),"function"!=typeof n&&(n=null),e(t,r,n)}}var s=e("readable-stream/transform"),a=e("util").inherits,u=e("xtend");a(n,s),n.prototype.destroy=function(e){if(!this._destroyed){this._destroyed=!0;var t=this;r.nextTick(function(){e&&t.emit("error",e),t.emit("close")})}},t.exports=o(function(e,t,r){var i=new n(e);return i._transform=t,r&&(i._flush=r),i}),t.exports.ctor=o(function(e,t,r){function i(t){return this instanceof i?(this.options=u(e,t),void n.call(this,this.options)):new i(t)}return a(i,n),i.prototype._transform=t,r&&(i.prototype._flush=r),i}),t.exports.obj=o(function(e,t,r){var i=new n(u({objectMode:!0,highWaterMark:16},e));return i._transform=t,r&&(i._flush=r),i})}).call(this,e("_process"))},{_process:28,"readable-stream/transform":41,util:56,xtend:58}],47:[function(e,t,r){var n=e("./escapeRegExp");t.exports=function(e){return null==e?"\\s":e.source?e.source:"["+n(e)+"]"}},{"./escapeRegExp":48}],48:[function(e,t,r){var n=e("./makeString");t.exports=function(e){return n(e).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}},{"./makeString":49}],49:[function(e,t,r){t.exports=function(e){return null==e?"":""+e}},{}],50:[function(e,t,r){var n=e("./helper/makeString"),i=e("./helper/defaultToWhiteSpace"),o=String.prototype.trimLeft;t.exports=function(e,t){return e=n(e),!t&&o?o.call(e):(t=i(t),e.replace(new RegExp("^"+t+"+"),""))}},{"./helper/defaultToWhiteSpace":47,"./helper/makeString":49}],51:[function(e,t,r){e("./trim");t.exports=function(e,t){if(null==e)return 0;var r=Math.pow(10,isFinite(t)?t:0);return Math.round(e*r)/r}},{"./trim":52}],52:[function(e,t,r){var n=e("./helper/makeString"),i=e("./helper/defaultToWhiteSpace"),o=String.prototype.trim;t.exports=function(e,t){return e=n(e),!t&&o?o.call(e):(t=i(t),e.replace(new RegExp("^"+t+"+|"+t+"+$","g"),""))}},{"./helper/defaultToWhiteSpace":47,"./helper/makeString":49}],53:[function(e,t,r){(function(){function e(e){function t(t,r,n,i,o,s){for(;o>=0&&s>o;o+=e){var a=i?i[o]:o;n=r(n,t[a],a,t)}return n}return function(r,n,i,o){n=_(n,o,4);var s=!O(r)&&b.keys(r),a=(s||r).length,u=e>0?0:a-1;return arguments.length<3&&(i=r[s?s[u]:u],u+=e),t(r,n,i,s,u,a)}}function n(e){return function(t,r,n){r=E(r,n);for(var i=T(t),o=e>0?0:i-1;o>=0&&i>o;o+=e)if(r(t[o],o,t))return o;return-1}}function i(e,t,r){return function(n,i,o){var s=0,a=T(n);if("number"==typeof o)e>0?s=o>=0?o:Math.max(o+a,s):a=o>=0?Math.min(o+1,a):o+a+1;else if(r&&o&&a)return o=r(n,i),n[o]===i?o:-1;if(i!==i)return o=t(f.call(n,s,a),b.isNaN),o>=0?o+s:-1;for(o=e>0?s:a-1;o>=0&&a>o;o+=e)if(n[o]===i)return o;return-1}}function o(e,t){var r=I.length,n=e.constructor,i=b.isFunction(n)&&n.prototype||c,o="constructor";for(b.has(e,o)&&!b.contains(t,o)&&t.push(o);r--;)o=I[r],o in e&&e[o]!==i[o]&&!b.contains(t,o)&&t.push(o)}var s=this,a=s._,u=Array.prototype,c=Object.prototype,l=Function.prototype,h=u.push,f=u.slice,p=c.toString,d=c.hasOwnProperty,m=Array.isArray,g=Object.keys,v=l.bind,y=Object.create,w=function(){},b=function(e){return e instanceof b?e:this instanceof b?void(this._wrapped=e):new b(e)};"undefined"!=typeof r?("undefined"!=typeof t&&t.exports&&(r=t.exports=b),r._=b):s._=b,b.VERSION="1.8.3";var _=function(e,t,r){if(void 0===t)return e;switch(null==r?3:r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,i){return e.call(t,r,n,i)};case 4:return function(r,n,i,o){return e.call(t,r,n,i,o)}}return function(){return e.apply(t,arguments)}},E=function(e,t,r){return null==e?b.identity:b.isFunction(e)?_(e,t,r):b.isObject(e)?b.matcher(e):b.property(e)};b.iteratee=function(e,t){return E(e,t,1/0)};var S=function(e,t){return function(r){var n=arguments.length;if(2>n||null==r)return r;for(var i=1;n>i;i++)for(var o=arguments[i],s=e(o),a=s.length,u=0;a>u;u++){var c=s[u];t&&void 0!==r[c]||(r[c]=o[c])}return r}},x=function(e){if(!b.isObject(e))return{};if(y)return y(e);w.prototype=e;var t=new w;return w.prototype=null,t},C=function(e){return function(t){return null==t?void 0:t[e]}},A=Math.pow(2,53)-1,T=C("length"),O=function(e){var t=T(e);return"number"==typeof t&&t>=0&&A>=t};b.each=b.forEach=function(e,t,r){t=_(t,r);var n,i;if(O(e))for(n=0,i=e.length;i>n;n++)t(e[n],n,e);else{var o=b.keys(e);for(n=0,i=o.length;i>n;n++)t(e[o[n]],o[n],e)}return e},b.map=b.collect=function(e,t,r){t=E(t,r);for(var n=!O(e)&&b.keys(e),i=(n||e).length,o=Array(i),s=0;i>s;s++){var a=n?n[s]:s;o[s]=t(e[a],a,e)}return o},b.reduce=b.foldl=b.inject=e(1),b.reduceRight=b.foldr=e(-1),b.find=b.detect=function(e,t,r){var n;return n=O(e)?b.findIndex(e,t,r):b.findKey(e,t,r),void 0!==n&&-1!==n?e[n]:void 0},b.filter=b.select=function(e,t,r){var n=[];return t=E(t,r),b.each(e,function(e,r,i){t(e,r,i)&&n.push(e)}),n},b.reject=function(e,t,r){return b.filter(e,b.negate(E(t)),r)},b.every=b.all=function(e,t,r){t=E(t,r);for(var n=!O(e)&&b.keys(e),i=(n||e).length,o=0;i>o;o++){var s=n?n[o]:o;if(!t(e[s],s,e))return!1}return!0},b.some=b.any=function(e,t,r){t=E(t,r);for(var n=!O(e)&&b.keys(e),i=(n||e).length,o=0;i>o;o++){var s=n?n[o]:o;if(t(e[s],s,e))return!0}return!1},b.contains=b.includes=b.include=function(e,t,r,n){return O(e)||(e=b.values(e)),("number"!=typeof r||n)&&(r=0),b.indexOf(e,t,r)>=0},b.invoke=function(e,t){var r=f.call(arguments,2),n=b.isFunction(t);return b.map(e,function(e){var i=n?t:e[t];return null==i?i:i.apply(e,r)})},b.pluck=function(e,t){return b.map(e,b.property(t))},b.where=function(e,t){return b.filter(e,b.matcher(t))},b.findWhere=function(e,t){return b.find(e,b.matcher(t))},b.max=function(e,t,r){var n,i,o=-(1/0),s=-(1/0);if(null==t&&null!=e){e=O(e)?e:b.values(e);for(var a=0,u=e.length;u>a;a++)n=e[a],n>o&&(o=n)}else t=E(t,r),b.each(e,function(e,r,n){i=t(e,r,n),(i>s||i===-(1/0)&&o===-(1/0))&&(o=e,s=i)});return o},b.min=function(e,t,r){var n,i,o=1/0,s=1/0;if(null==t&&null!=e){e=O(e)?e:b.values(e);for(var a=0,u=e.length;u>a;a++)n=e[a],o>n&&(o=n)}else t=E(t,r),b.each(e,function(e,r,n){i=t(e,r,n),(s>i||i===1/0&&o===1/0)&&(o=e,s=i)});return o},b.shuffle=function(e){for(var t,r=O(e)?e:b.values(e),n=r.length,i=Array(n),o=0;n>o;o++)t=b.random(0,o),t!==o&&(i[o]=i[t]),i[t]=r[o];return i},b.sample=function(e,t,r){return null==t||r?(O(e)||(e=b.values(e)),e[b.random(e.length-1)]):b.shuffle(e).slice(0,Math.max(0,t))},b.sortBy=function(e,t,r){return t=E(t,r),b.pluck(b.map(e,function(e,r,n){return{value:e,index:r,criteria:t(e,r,n)}}).sort(function(e,t){var r=e.criteria,n=t.criteria;if(r!==n){if(r>n||void 0===r)return 1;if(n>r||void 0===n)return-1}return e.index-t.index}),"value")};var k=function(e){return function(t,r,n){var i={};return r=E(r,n),b.each(t,function(n,o){var s=r(n,o,t);e(i,n,s)}),i}};b.groupBy=k(function(e,t,r){b.has(e,r)?e[r].push(t):e[r]=[t]}),b.indexBy=k(function(e,t,r){e[r]=t}),b.countBy=k(function(e,t,r){b.has(e,r)?e[r]++:e[r]=1}),b.toArray=function(e){return e?b.isArray(e)?f.call(e):O(e)?b.map(e,b.identity):b.values(e):[]},b.size=function(e){return null==e?0:O(e)?e.length:b.keys(e).length},b.partition=function(e,t,r){t=E(t,r);var n=[],i=[];return b.each(e,function(e,r,o){(t(e,r,o)?n:i).push(e)}),[n,i]},b.first=b.head=b.take=function(e,t,r){return null==e?void 0:null==t||r?e[0]:b.initial(e,e.length-t)},b.initial=function(e,t,r){return f.call(e,0,Math.max(0,e.length-(null==t||r?1:t)))},b.last=function(e,t,r){return null==e?void 0:null==t||r?e[e.length-1]:b.rest(e,Math.max(0,e.length-t))},b.rest=b.tail=b.drop=function(e,t,r){return f.call(e,null==t||r?1:t)},b.compact=function(e){return b.filter(e,b.identity)};var R=function(e,t,r,n){for(var i=[],o=0,s=n||0,a=T(e);a>s;s++){var u=e[s];if(O(u)&&(b.isArray(u)||b.isArguments(u))){t||(u=R(u,t,r));var c=0,l=u.length;for(i.length+=l;l>c;)i[o++]=u[c++]}else r||(i[o++]=u)}return i};b.flatten=function(e,t){return R(e,t,!1)},b.without=function(e){return b.difference(e,f.call(arguments,1))},b.uniq=b.unique=function(e,t,r,n){b.isBoolean(t)||(n=r,r=t,t=!1),null!=r&&(r=E(r,n));for(var i=[],o=[],s=0,a=T(e);a>s;s++){var u=e[s],c=r?r(u,s,e):u;t?(s&&o===c||i.push(u),o=c):r?b.contains(o,c)||(o.push(c),i.push(u)):b.contains(i,u)||i.push(u)}return i},b.union=function(){return b.uniq(R(arguments,!0,!0))},b.intersection=function(e){for(var t=[],r=arguments.length,n=0,i=T(e);i>n;n++){var o=e[n];if(!b.contains(t,o)){for(var s=1;r>s&&b.contains(arguments[s],o);s++);s===r&&t.push(o)}}return t},b.difference=function(e){var t=R(arguments,!0,!0,1);return b.filter(e,function(e){return!b.contains(t,e)})},b.zip=function(){return b.unzip(arguments)},b.unzip=function(e){for(var t=e&&b.max(e,T).length||0,r=Array(t),n=0;t>n;n++)r[n]=b.pluck(e,n);return r},b.object=function(e,t){for(var r={},n=0,i=T(e);i>n;n++)t?r[e[n]]=t[n]:r[e[n][0]]=e[n][1];return r},b.findIndex=n(1),b.findLastIndex=n(-1),b.sortedIndex=function(e,t,r,n){r=E(r,n,1);for(var i=r(t),o=0,s=T(e);s>o;){var a=Math.floor((o+s)/2);r(e[a])<i?o=a+1:s=a}return o},b.indexOf=i(1,b.findIndex,b.sortedIndex),b.lastIndexOf=i(-1,b.findLastIndex),b.range=function(e,t,r){null==t&&(t=e||0,e=0),r=r||1;for(var n=Math.max(Math.ceil((t-e)/r),0),i=Array(n),o=0;n>o;o++,e+=r)i[o]=e;return i};var j=function(e,t,r,n,i){if(!(n instanceof t))return e.apply(r,i);var o=x(e.prototype),s=e.apply(o,i);return b.isObject(s)?s:o};b.bind=function(e,t){if(v&&e.bind===v)return v.apply(e,f.call(arguments,1));if(!b.isFunction(e))throw new TypeError("Bind must be called on a function");var r=f.call(arguments,2),n=function(){return j(e,n,t,this,r.concat(f.call(arguments)))};return n},b.partial=function(e){var t=f.call(arguments,1),r=function(){for(var n=0,i=t.length,o=Array(i),s=0;i>s;s++)o[s]=t[s]===b?arguments[n++]:t[s];for(;n<arguments.length;)o.push(arguments[n++]);return j(e,r,this,this,o)};return r},b.bindAll=function(e){var t,r,n=arguments.length;if(1>=n)throw new Error("bindAll must be passed function names");for(t=1;n>t;t++)r=arguments[t],e[r]=b.bind(e[r],e);return e},b.memoize=function(e,t){var r=function(n){var i=r.cache,o=""+(t?t.apply(this,arguments):n);return b.has(i,o)||(i[o]=e.apply(this,arguments)),i[o]};return r.cache={},r},b.delay=function(e,t){var r=f.call(arguments,2);return setTimeout(function(){return e.apply(null,r)},t)},b.defer=b.partial(b.delay,b,1),b.throttle=function(e,t,r){var n,i,o,s=null,a=0;r||(r={});var u=function(){a=r.leading===!1?0:b.now(),s=null,o=e.apply(n,i),s||(n=i=null)};return function(){var c=b.now();a||r.leading!==!1||(a=c);var l=t-(c-a);return n=this,i=arguments,0>=l||l>t?(s&&(clearTimeout(s),s=null),a=c,o=e.apply(n,i),s||(n=i=null)):s||r.trailing===!1||(s=setTimeout(u,l)),o}},b.debounce=function(e,t,r){var n,i,o,s,a,u=function(){var c=b.now()-s;t>c&&c>=0?n=setTimeout(u,t-c):(n=null,r||(a=e.apply(o,i),n||(o=i=null)))};return function(){o=this,i=arguments,s=b.now();var c=r&&!n;return n||(n=setTimeout(u,t)),c&&(a=e.apply(o,i),o=i=null),a}},b.wrap=function(e,t){return b.partial(t,e)},b.negate=function(e){return function(){return!e.apply(this,arguments)}},b.compose=function(){var e=arguments,t=e.length-1;return function(){for(var r=t,n=e[t].apply(this,arguments);r--;)n=e[r].call(this,n);return n}},b.after=function(e,t){return function(){return--e<1?t.apply(this,arguments):void 0}},b.before=function(e,t){var r;return function(){return--e>0&&(r=t.apply(this,arguments)),1>=e&&(t=null),r}},b.once=b.partial(b.before,2);var L=!{toString:null}.propertyIsEnumerable("toString"),I=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];b.keys=function(e){if(!b.isObject(e))return[];if(g)return g(e);var t=[];for(var r in e)b.has(e,r)&&t.push(r);return L&&o(e,t),t},b.allKeys=function(e){if(!b.isObject(e))return[];var t=[];for(var r in e)t.push(r);return L&&o(e,t),t},b.values=function(e){for(var t=b.keys(e),r=t.length,n=Array(r),i=0;r>i;i++)n[i]=e[t[i]];return n},b.mapObject=function(e,t,r){t=E(t,r);for(var n,i=b.keys(e),o=i.length,s={},a=0;o>a;a++)n=i[a],s[n]=t(e[n],n,e);return s},b.pairs=function(e){for(var t=b.keys(e),r=t.length,n=Array(r),i=0;r>i;i++)n[i]=[t[i],e[t[i]]];return n},b.invert=function(e){for(var t={},r=b.keys(e),n=0,i=r.length;i>n;n++)t[e[r[n]]]=r[n];return t},b.functions=b.methods=function(e){var t=[];for(var r in e)b.isFunction(e[r])&&t.push(r);return t.sort()},b.extend=S(b.allKeys),b.extendOwn=b.assign=S(b.keys),b.findKey=function(e,t,r){t=E(t,r);for(var n,i=b.keys(e),o=0,s=i.length;s>o;o++)if(n=i[o],t(e[n],n,e))return n},b.pick=function(e,t,r){var n,i,o={},s=e;if(null==s)return o;b.isFunction(t)?(i=b.allKeys(s),n=_(t,r)):(i=R(arguments,!1,!1,1),n=function(e,t,r){return t in r},s=Object(s));for(var a=0,u=i.length;u>a;a++){var c=i[a],l=s[c];n(l,c,s)&&(o[c]=l)}return o},b.omit=function(e,t,r){if(b.isFunction(t))t=b.negate(t);else{var n=b.map(R(arguments,!1,!1,1),String);t=function(e,t){return!b.contains(n,t)}}return b.pick(e,t,r)},b.defaults=S(b.allKeys,!0),b.create=function(e,t){var r=x(e);return t&&b.extendOwn(r,t),r},b.clone=function(e){return b.isObject(e)?b.isArray(e)?e.slice():b.extend({},e):e},b.tap=function(e,t){return t(e),e},b.isMatch=function(e,t){var r=b.keys(t),n=r.length;if(null==e)return!n;for(var i=Object(e),o=0;n>o;o++){var s=r[o];if(t[s]!==i[s]||!(s in i))return!1}return!0};var U=function(e,t,r,n){if(e===t)return 0!==e||1/e===1/t;if(null==e||null==t)return e===t;e instanceof b&&(e=e._wrapped),t instanceof b&&(t=t._wrapped);var i=p.call(e);if(i!==p.call(t))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!==+e?+t!==+t:0===+e?1/+e===1/t:+e===+t;case"[object Date]":case"[object Boolean]":return+e===+t}var o="[object Array]"===i;if(!o){if("object"!=typeof e||"object"!=typeof t)return!1;var s=e.constructor,a=t.constructor;if(s!==a&&!(b.isFunction(s)&&s instanceof s&&b.isFunction(a)&&a instanceof a)&&"constructor"in e&&"constructor"in t)return!1}r=r||[],n=n||[];for(var u=r.length;u--;)if(r[u]===e)return n[u]===t;if(r.push(e),n.push(t),o){if(u=e.length,u!==t.length)return!1;for(;u--;)if(!U(e[u],t[u],r,n))return!1}else{var c,l=b.keys(e);if(u=l.length,b.keys(t).length!==u)return!1;for(;u--;)if(c=l[u],!b.has(t,c)||!U(e[c],t[c],r,n))return!1}return r.pop(),n.pop(),!0};b.isEqual=function(e,t){return U(e,t)},b.isEmpty=function(e){return null==e?!0:O(e)&&(b.isArray(e)||b.isString(e)||b.isArguments(e))?0===e.length:0===b.keys(e).length},b.isElement=function(e){return!(!e||1!==e.nodeType)},b.isArray=m||function(e){return"[object Array]"===p.call(e)},b.isObject=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},b.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(e){b["is"+e]=function(t){return p.call(t)==="[object "+e+"]"}}),b.isArguments(arguments)||(b.isArguments=function(e){return b.has(e,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(b.isFunction=function(e){return"function"==typeof e||!1}),b.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},b.isNaN=function(e){return b.isNumber(e)&&e!==+e},b.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"===p.call(e)},b.isNull=function(e){return null===e},b.isUndefined=function(e){return void 0===e},b.has=function(e,t){return null!=e&&d.call(e,t)},b.noConflict=function(){return s._=a,this},b.identity=function(e){return e},b.constant=function(e){return function(){return e}},b.noop=function(){},b.property=C,b.propertyOf=function(e){return null==e?function(){}:function(t){return e[t]}},b.matcher=b.matches=function(e){return e=b.extendOwn({},e),function(t){return b.isMatch(t,e)}},b.times=function(e,t,r){var n=Array(Math.max(0,e));t=_(t,r,1);for(var i=0;e>i;i++)n[i]=t(i);return n},b.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},b.now=Date.now||function(){return(new Date).getTime()};var N={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},M=b.invert(N),P=function(e){var t=function(t){return e[t]},r="(?:"+b.keys(e).join("|")+")",n=RegExp(r),i=RegExp(r,"g");return function(e){return e=null==e?"":""+e,n.test(e)?e.replace(i,t):e}};b.escape=P(N),b.unescape=P(M),b.result=function(e,t,r){var n=null==e?void 0:e[t];return void 0===n&&(n=r),b.isFunction(n)?n.call(e):n};var B=0;b.uniqueId=function(e){var t=++B+"";return e?e+t:t},b.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var z=/(.)^/,D={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},q=/\\|'|\r|\n|\u2028|\u2029/g,F=function(e){return"\\"+D[e]};b.template=function(e,t,r){!t&&r&&(t=r),t=b.defaults({},t,b.templateSettings);var n=RegExp([(t.escape||z).source,(t.interpolate||z).source,(t.evaluate||z).source].join("|")+"|$","g"),i=0,o="__p+='";e.replace(n,function(t,r,n,s,a){return o+=e.slice(i,a).replace(q,F),i=a+t.length,r?o+="'+\n((__t=("+r+"))==null?'':_.escape(__t))+\n'":n?o+="'+\n((__t=("+n+"))==null?'':__t)+\n'":s&&(o+="';\n"+s+"\n__p+='"),t}),o+="';\n",t.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{var s=new Function(t.variable||"obj","_",o)}catch(a){
throw a.source=o,a}var u=function(e){return s.call(this,e,b)},c=t.variable||"obj";return u.source="function("+c+"){\n"+o+"}",u},b.chain=function(e){var t=b(e);return t._chain=!0,t};var Y=function(e,t){return e._chain?b(t).chain():t};b.mixin=function(e){b.each(b.functions(e),function(t){var r=b[t]=e[t];b.prototype[t]=function(){var e=[this._wrapped];return h.apply(e,arguments),Y(this,r.apply(b,e))}})},b.mixin(b),b.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=u[e];b.prototype[e]=function(){var r=this._wrapped;return t.apply(r,arguments),"shift"!==e&&"splice"!==e||0!==r.length||delete r[0],Y(this,r)}}),b.each(["concat","join","slice"],function(e){var t=u[e];b.prototype[e]=function(){return Y(this,t.apply(this._wrapped,arguments))}}),b.prototype.value=function(){return this._wrapped},b.prototype.valueOf=b.prototype.toJSON=b.prototype.value,b.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return b})}).call(this)},{}],54:[function(e,t,r){function n(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function i(e,t,r){if(e&&c(e)&&e instanceof n)return e;var i=new n;return i.parse(e,t,r),i}function o(e){return u(e)&&(e=i(e)),e instanceof n?e.format():n.prototype.format.call(e)}function s(e,t){return i(e,!1,!0).resolve(t)}function a(e,t){return e?i(e,!1,!0).resolveObject(t):t}function u(e){return"string"==typeof e}function c(e){return"object"==typeof e&&null!==e}function l(e){return null===e}function h(e){return null==e}var f=e("punycode");r.parse=i,r.resolve=s,r.resolveObject=a,r.format=o,r.Url=n;var p=/^([a-z0-9.+-]+:)/i,d=/:[0-9]*$/,m=["<",">",'"',"`"," ","\r","\n","	"],g=["{","}","|","\\","^","`"].concat(m),v=["'"].concat(g),y=["%","/","?",";","#"].concat(v),w=["/","?","#"],b=255,_=/^[a-z0-9A-Z_-]{0,63}$/,E=/^([a-z0-9A-Z_-]{0,63})(.*)$/,S={javascript:!0,"javascript:":!0},x={javascript:!0,"javascript:":!0},C={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},A=e("querystring");n.prototype.parse=function(e,t,r){if(!u(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var n=e;n=n.trim();var i=p.exec(n);if(i){i=i[0];var o=i.toLowerCase();this.protocol=o,n=n.substr(i.length)}if(r||i||n.match(/^\/\/[^@\/]+@[^@\/]+/)){var s="//"===n.substr(0,2);!s||i&&x[i]||(n=n.substr(2),this.slashes=!0)}if(!x[i]&&(s||i&&!C[i])){for(var a=-1,c=0;c<w.length;c++){var l=n.indexOf(w[c]);-1!==l&&(-1===a||a>l)&&(a=l)}var h,d;d=-1===a?n.lastIndexOf("@"):n.lastIndexOf("@",a),-1!==d&&(h=n.slice(0,d),n=n.slice(d+1),this.auth=decodeURIComponent(h)),a=-1;for(var c=0;c<y.length;c++){var l=n.indexOf(y[c]);-1!==l&&(-1===a||a>l)&&(a=l)}-1===a&&(a=n.length),this.host=n.slice(0,a),n=n.slice(a),this.parseHost(),this.hostname=this.hostname||"";var m="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!m)for(var g=this.hostname.split(/\./),c=0,T=g.length;T>c;c++){var O=g[c];if(O&&!O.match(_)){for(var k="",R=0,j=O.length;j>R;R++)k+=O.charCodeAt(R)>127?"x":O[R];if(!k.match(_)){var L=g.slice(0,c),I=g.slice(c+1),U=O.match(E);U&&(L.push(U[1]),I.unshift(U[2])),I.length&&(n="/"+I.join(".")+n),this.hostname=L.join(".");break}}}if(this.hostname.length>b?this.hostname="":this.hostname=this.hostname.toLowerCase(),!m){for(var N=this.hostname.split("."),M=[],c=0;c<N.length;++c){var P=N[c];M.push(P.match(/[^A-Za-z0-9_-]/)?"xn--"+f.encode(P):P)}this.hostname=M.join(".")}var B=this.port?":"+this.port:"",z=this.hostname||"";this.host=z+B,this.href+=this.host,m&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==n[0]&&(n="/"+n))}if(!S[o])for(var c=0,T=v.length;T>c;c++){var D=v[c],q=encodeURIComponent(D);q===D&&(q=escape(D)),n=n.split(D).join(q)}var F=n.indexOf("#");-1!==F&&(this.hash=n.substr(F),n=n.slice(0,F));var Y=n.indexOf("?");if(-1!==Y?(this.search=n.substr(Y),this.query=n.substr(Y+1),t&&(this.query=A.parse(this.query)),n=n.slice(0,Y)):t&&(this.search="",this.query={}),n&&(this.pathname=n),C[o]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var B=this.pathname||"",P=this.search||"";this.path=B+P}return this.href=this.format(),this},n.prototype.format=function(){var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var t=this.protocol||"",r=this.pathname||"",n=this.hash||"",i=!1,o="";this.host?i=e+this.host:this.hostname&&(i=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&c(this.query)&&Object.keys(this.query).length&&(o=A.stringify(this.query));var s=this.search||o&&"?"+o||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||C[t])&&i!==!1?(i="//"+(i||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):i||(i=""),n&&"#"!==n.charAt(0)&&(n="#"+n),s&&"?"!==s.charAt(0)&&(s="?"+s),r=r.replace(/[?#]/g,function(e){return encodeURIComponent(e)}),s=s.replace("#","%23"),t+i+r+s+n},n.prototype.resolve=function(e){return this.resolveObject(i(e,!1,!0)).format()},n.prototype.resolveObject=function(e){if(u(e)){var t=new n;t.parse(e,!1,!0),e=t}var r=new n;if(Object.keys(this).forEach(function(e){r[e]=this[e]},this),r.hash=e.hash,""===e.href)return r.href=r.format(),r;if(e.slashes&&!e.protocol)return Object.keys(e).forEach(function(t){"protocol"!==t&&(r[t]=e[t])}),C[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r;if(e.protocol&&e.protocol!==r.protocol){if(!C[e.protocol])return Object.keys(e).forEach(function(t){r[t]=e[t]}),r.href=r.format(),r;if(r.protocol=e.protocol,e.host||x[e.protocol])r.pathname=e.pathname;else{for(var i=(e.pathname||"").split("/");i.length&&!(e.host=i.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==i[0]&&i.unshift(""),i.length<2&&i.unshift(""),r.pathname=i.join("/")}if(r.search=e.search,r.query=e.query,r.host=e.host||"",r.auth=e.auth,r.hostname=e.hostname||e.host,r.port=e.port,r.pathname||r.search){var o=r.pathname||"",s=r.search||"";r.path=o+s}return r.slashes=r.slashes||e.slashes,r.href=r.format(),r}var a=r.pathname&&"/"===r.pathname.charAt(0),c=e.host||e.pathname&&"/"===e.pathname.charAt(0),f=c||a||r.host&&e.pathname,p=f,d=r.pathname&&r.pathname.split("/")||[],i=e.pathname&&e.pathname.split("/")||[],m=r.protocol&&!C[r.protocol];if(m&&(r.hostname="",r.port=null,r.host&&(""===d[0]?d[0]=r.host:d.unshift(r.host)),r.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===i[0]?i[0]=e.host:i.unshift(e.host)),e.host=null),f=f&&(""===i[0]||""===d[0])),c)r.host=e.host||""===e.host?e.host:r.host,r.hostname=e.hostname||""===e.hostname?e.hostname:r.hostname,r.search=e.search,r.query=e.query,d=i;else if(i.length)d||(d=[]),d.pop(),d=d.concat(i),r.search=e.search,r.query=e.query;else if(!h(e.search)){if(m){r.hostname=r.host=d.shift();var g=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1;g&&(r.auth=g.shift(),r.host=r.hostname=g.shift())}return r.search=e.search,r.query=e.query,l(r.pathname)&&l(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!d.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var v=d.slice(-1)[0],y=(r.host||e.host)&&("."===v||".."===v)||""===v,w=0,b=d.length;b>=0;b--)v=d[b],"."==v?d.splice(b,1):".."===v?(d.splice(b,1),w++):w&&(d.splice(b,1),w--);if(!f&&!p)for(;w--;w)d.unshift("..");!f||""===d[0]||d[0]&&"/"===d[0].charAt(0)||d.unshift(""),y&&"/"!==d.join("/").substr(-1)&&d.push("");var _=""===d[0]||d[0]&&"/"===d[0].charAt(0);if(m){r.hostname=r.host=_?"":d.length?d.shift():"";var g=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1;g&&(r.auth=g.shift(),r.host=r.hostname=g.shift())}return f=f||r.host&&d.length,f&&!_&&d.unshift(""),d.length?r.pathname=d.join("/"):(r.pathname=null,r.path=null),l(r.pathname)&&l(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=e.auth||r.auth,r.slashes=r.slashes||e.slashes,r.href=r.format(),r},n.prototype.parseHost=function(){var e=this.host,t=d.exec(e);t&&(t=t[0],":"!==t&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},{punycode:29,querystring:32}],55:[function(e,t,r){t.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},{}],56:[function(e,t,r){(function(t,n){function i(e,t){var n={seen:[],stylize:s};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),m(t)?n.showHidden=t:t&&r._extend(n,t),_(n.showHidden)&&(n.showHidden=!1),_(n.depth)&&(n.depth=2),_(n.colors)&&(n.colors=!1),_(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=o),u(n,e,n.depth)}function o(e,t){var r=i.styles[t];return r?"["+i.colors[r][0]+"m"+e+"["+i.colors[r][1]+"m":e}function s(e,t){return e}function a(e){var t={};return e.forEach(function(e,r){t[e]=!0}),t}function u(e,t,n){if(e.customInspect&&t&&A(t.inspect)&&t.inspect!==r.inspect&&(!t.constructor||t.constructor.prototype!==t)){var i=t.inspect(n,e);return w(i)||(i=u(e,i,n)),i}var o=c(e,t);if(o)return o;var s=Object.keys(t),m=a(s);if(e.showHidden&&(s=Object.getOwnPropertyNames(t)),C(t)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return l(t);if(0===s.length){if(A(t)){var g=t.name?": "+t.name:"";return e.stylize("[Function"+g+"]","special")}if(E(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(x(t))return e.stylize(Date.prototype.toString.call(t),"date");if(C(t))return l(t)}var v="",y=!1,b=["{","}"];if(d(t)&&(y=!0,b=["[","]"]),A(t)){var _=t.name?": "+t.name:"";v=" [Function"+_+"]"}if(E(t)&&(v=" "+RegExp.prototype.toString.call(t)),x(t)&&(v=" "+Date.prototype.toUTCString.call(t)),C(t)&&(v=" "+l(t)),0===s.length&&(!y||0==t.length))return b[0]+v+b[1];if(0>n)return E(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special");e.seen.push(t);var S;return S=y?h(e,t,n,m,s):s.map(function(r){return f(e,t,n,m,r,y)}),e.seen.pop(),p(S,v,b)}function c(e,t){if(_(t))return e.stylize("undefined","undefined");if(w(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}return y(t)?e.stylize(""+t,"number"):m(t)?e.stylize(""+t,"boolean"):g(t)?e.stylize("null","null"):void 0}function l(e){return"["+Error.prototype.toString.call(e)+"]"}function h(e,t,r,n,i){for(var o=[],s=0,a=t.length;a>s;++s)j(t,String(s))?o.push(f(e,t,r,n,String(s),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(f(e,t,r,n,i,!0))}),o}function f(e,t,r,n,i,o){var s,a,c;if(c=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]},c.get?a=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(a=e.stylize("[Setter]","special")),j(n,i)||(s="["+i+"]"),a||(e.seen.indexOf(c.value)<0?(a=g(r)?u(e,c.value,null):u(e,c.value,r-1),a.indexOf("\n")>-1&&(a=o?a.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+a.split("\n").map(function(e){return"   "+e}).join("\n"))):a=e.stylize("[Circular]","special")),_(s)){if(o&&i.match(/^\d+$/))return a;s=JSON.stringify(""+i),s.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+a}function p(e,t,r){var n=0,i=e.reduce(function(e,t){return n++,t.indexOf("\n")>=0&&n++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0);return i>60?r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1]:r[0]+t+" "+e.join(", ")+" "+r[1]}function d(e){return Array.isArray(e)}function m(e){return"boolean"==typeof e}function g(e){return null===e}function v(e){return null==e}function y(e){return"number"==typeof e}function w(e){return"string"==typeof e}function b(e){return"symbol"==typeof e}function _(e){return void 0===e}function E(e){return S(e)&&"[object RegExp]"===O(e)}function S(e){return"object"==typeof e&&null!==e}function x(e){return S(e)&&"[object Date]"===O(e)}function C(e){return S(e)&&("[object Error]"===O(e)||e instanceof Error)}function A(e){return"function"==typeof e}function T(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function O(e){return Object.prototype.toString.call(e)}function k(e){return 10>e?"0"+e.toString(10):e.toString(10)}function R(){var e=new Date,t=[k(e.getHours()),k(e.getMinutes()),k(e.getSeconds())].join(":");return[e.getDate(),N[e.getMonth()],t].join(" ")}function j(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var L=/%[sdj%]/g;r.format=function(e){if(!w(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(i(arguments[r]));return t.join(" ")}for(var r=1,n=arguments,o=n.length,s=String(e).replace(L,function(e){if("%%"===e)return"%";if(r>=o)return e;switch(e){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(t){return"[Circular]"}default:return e}}),a=n[r];o>r;a=n[++r])s+=g(a)||!S(a)?" "+a:" "+i(a);return s},r.deprecate=function(e,i){function o(){if(!s){if(t.throwDeprecation)throw new Error(i);t.traceDeprecation?console.trace(i):console.error(i),s=!0}return e.apply(this,arguments)}if(_(n.process))return function(){return r.deprecate(e,i).apply(this,arguments)};if(t.noDeprecation===!0)return e;var s=!1;return o};var I,U={};r.debuglog=function(e){if(_(I)&&(I=t.env.NODE_DEBUG||""),e=e.toUpperCase(),!U[e])if(new RegExp("\\b"+e+"\\b","i").test(I)){var n=t.pid;U[e]=function(){var t=r.format.apply(r,arguments);console.error("%s %d: %s",e,n,t)}}else U[e]=function(){};return U[e]},r.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},r.isArray=d,r.isBoolean=m,r.isNull=g,r.isNullOrUndefined=v,r.isNumber=y,r.isString=w,r.isSymbol=b,r.isUndefined=_,r.isRegExp=E,r.isObject=S,r.isDate=x,r.isError=C,r.isFunction=A,r.isPrimitive=T,r.isBuffer=e("./support/isBuffer");var N=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];r.log=function(){console.log("%s - %s",R(),r.format.apply(r,arguments))},r.inherits=e("inherits"),r._extend=function(e,t){if(!t||!S(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":55,_process:28,inherits:21}],57:[function(e,t,r){function n(e,t,r){var n;return n=t?new o(e,t):new o(e)}var i=function(){return this}(),o=i.WebSocket||i.MozWebSocket;t.exports=o?n:null,o&&(n.prototype=o.prototype)},{}],58:[function(e,t,r){function n(){for(var e={},t=0;t<arguments.length;t++){var r=arguments[t];for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])}return e}t.exports=n},{}]},{},[2,3,4,5,6,7,8,1]);
//# sourceMappingURL=tmi.js.map